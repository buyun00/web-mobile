System.register("chunks:///_virtual/app.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./handle.ts"],(function(n){var t,e,i,s,c,u,o,r;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){i=n.cclegacy,s=n.game,c=n.Game},function(n){u=n.default},function(n){o=n.cccInited,r=n.appInited}],execute:function(){i._RF.push({},"121dfhPYx1FV4MaGWQefe6o","app",void 0);var a=n("App",function(n){function i(){return n.call(this)||this}return t(i,n),e(i,null,[{key:"inst",get:function(){return this._inst||(this._inst=new i),this._inst}}]),i}(u));a._inst=null;var l=n("app",a.inst);o&&s.once(c.EVENT_ENGINE_INITED,(function(){})),r&&l.once(a.EventType.EVENT_APPINIT_FINISHED,(function(){})),i._RF.pop()}}}));

System.register("chunks:///_virtual/AppInit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseAppInit.ts"],(function(n){var t,o,i,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,i=n._decorator},function(n){e=n.default}],execute:function(){var c;o._RF.push({},"598f2EhUohEebUzsqwXHool","AppInit",void 0);var r=i.ccclass;n("AppInit",r("AppInit")(c=function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var i=o.prototype;return i.onLoad=function(){},i.onFinish=function(){},o}(e))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/Audio.ts",["cc"],(function(t){var e,u,i;return{setters:[function(t){e=t.cclegacy,u=t.AudioSource,i=t.Node}],execute:function(){e._RF.push({},"a40e7emzaxEXKUMqM7SQR28","Audio",void 0);t("default",function(){function t(){this.volume=1,this.volumeScale=1,this.mute=!1,this.endedCallback=null,this.startedCallback=null,this.paused=!1,this.audioSource=null;var t=new i("audio");this.audioSource=t.addComponent(u),t.on(u.EventType.ENDED,this.onAudioEnded,this),t.on(u.EventType.STARTED,this.onAudioStarted,this)}var e=t.prototype;return e.onAudioEnded=function(){if(this.endedCallback){var t=this.endedCallback;this.endedCallback=null,t()}},e.onAudioStarted=function(){if(this.startedCallback){var t=this.startedCallback;this.startedCallback=null,t()}},e.play=function(t,e,u){return void 0===e&&(e=null),void 0===u&&(u=null),this.audioSource.clip=t,this.endedCallback=e,this.startedCallback=u,this.audioSource.play(),this},e.stop=function(){return this.audioSource.stop(),this.audioSource.node.emit(u.EventType.ENDED),this},e.pause=function(){return this.paused=!0,this.audioSource.pause(),this},e.resume=function(){return this.paused&&(this.paused=!1,this.audioSource.play()),this},e.setVolume=function(t,e){return void 0===t&&(t=1),this.volume=t,"number"==typeof e&&(this.volumeScale=e),this.audioSource.volume=t*this.volumeScale*(this.mute?0:1),this},e.getVolume=function(){return this.volume},e.setVolumeScale=function(t){return void 0===t&&(t=1),this.volumeScale=t,this.audioSource.volume=this.volume*t*(this.mute?0:1),this},e.getVolumeScale=function(){return this.volumeScale},e.setLoop=function(t){return this.audioSource.loop=t,this},e.getLoop=function(){return this.audioSource.loop},e.setMute=function(t){return void 0===t&&(t=!0),this.mute=t,this.setVolume(this.volume),this},e.getMute=function(){return this.mute},e.onEnded=function(t){return this.endedCallback=t,this},e.clear=function(){return this.volume=1,this.volumeScale=1,this.mute=!1,this.paused=!1,this.endedCallback=null,this.startedCallback=null,this.audioSource&&(this.audioSource.stop(),this.audioSource.volume=1,this.audioSource.clip=null,this.audioSource.loop=!1),this},e.destroy=function(){this.clear(),this.audioSource.destroy(),this.audioSource.node.destroy(),this.audioSource=null},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEngine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(e){var t,u,s;return{setters:[function(e){t=e.createClass},function(e){u=e.cclegacy},function(e){s=e.default}],execute:function(){u._RF.push({},"7a6389cgB9OaYjMP8cuG+mF","AudioEngine",void 0),e("default",function(){function e(){this.audioID=1,this.endedCallbackMap=new Map,this.effectMap=new Map,this.music=null,this.musicMute=!1,this.effectMute=!1,this.musicVolume=1,this.musicVolumeScale=1,this.effectVolume=1,this.effectVolumeScale=1}var u=e.prototype;return u.playEffect=function(e,t,u,i,c){var n=this;void 0===t&&(t=1),void 0===u&&(u=!1),void 0===i&&(i=null),void 0===c&&(c=null),this.audioID>1e5&&(this.audioID=1);var f=this.audioID++,l=s.inst.getAudio();return this.effectMap.set(f,l),c&&this.endedCallbackMap.set(f,c),l.setLoop(u).setMute(this.effectMute).setVolume(t,this.effectVolumeScale).play(e,(function(){s.inst.putAudio(l),n.effectMap.delete(f);var e=n.endedCallbackMap.get(f);e&&(n.endedCallbackMap.delete(f),e())}),(function(){i&&i(f)})),f},u.stopEffect=function(e){var t;return!(null==(t=this.effectMap.get(e))||!t.stop())},u.stopAllEffects=function(){this.effectMap.forEach((function(e){e.stop()}))},u.pauseEffect=function(e){var t;return!(null==(t=this.effectMap.get(e))||!t.pause())},u.pauseAllEffects=function(){this.effectMap.forEach((function(e){e.pause()}))},u.resumeEffect=function(e){var t;return!(null==(t=this.effectMap.get(e))||!t.resume())},u.resumeAllEffects=function(){this.effectMap.forEach((function(e){e.resume()}))},u.setEffectMute=function(e,t){var u;return!(null==(u=this.effectMap.get(e))||!u.setMute(t))},u.setAllEffectsMute=function(e){this.effectMute=e,this.effectMap.forEach((function(t){t.setMute(e)}))},u.getEffectMute=function(e){var t;return!(null==(t=this.effectMap.get(e))||!t.getMute())},u.getAllEffectsMute=function(){return this.effectMute},u.setEffectVolume=function(e,t){var u;return!(null==(u=this.effectMap.get(e))||!u.setVolume(t))},u.setAllEffectsVolume=function(e){this.effectVolume=e,this.effectMap.forEach((function(t){t.setVolume(e)}))},u.getEffectVolume=function(e){var t;return(null==(t=this.effectMap.get(e))?void 0:t.getVolume())||0},u.getAllEffectsVolume=function(){return this.effectVolume},u.setEffectVolumeScale=function(e,t){var u;return!(null==(u=this.effectMap.get(e))||!u.setVolumeScale(t))},u.setAllEffectsVolumeScale=function(e){this.effectVolumeScale=e,this.effectMap.forEach((function(t){t.setVolumeScale(e)}))},u.getEffectVolumeScale=function(e){var t;return(null==(t=this.effectMap.get(e))?void 0:t.getVolumeScale())||0},u.getAllEffectsVolumeScale=function(){return this.effectVolumeScale},u.playMusic=function(e,t,u){return void 0===t&&(t=1),void 0===u&&(u=null),this.music&&this.music.destroy(),this.music=s.inst.getAudio(),this.music.setLoop(!0).setVolume(t).play(e,null,u),0},u.stopMusic=function(){var e;return!(null==(e=this.music)||!e.stop())},u.pauseMusic=function(){var e;return!(null==(e=this.music)||!e.pause())},u.resumeMusic=function(){var e;return!(null==(e=this.music)||!e.resume())},u.setMusicMute=function(e){var t;return this.musicMute=e,!(null==(t=this.music)||!t.setMute(e))},u.getMusicMute=function(){return this.musicMute},u.setMusicVolume=function(e){var t;return this.musicVolume=e,!(null==(t=this.music)||!t.setVolume(e))},u.getMusicVolume=function(){return this.musicVolume},u.setMusicVolumeScale=function(e){var t;return this.musicVolumeScale=e,!(null==(t=this.music)||!t.setVolumeScale(e))},u.getMusicVolumeScale=function(){return this.musicVolumeScale},u.setEndedCallback=function(e,t){var u;return 0===e?!(null==(u=this.music)||!u.onEnded(t)):!!this.effectMap.has(e)&&(this.endedCallbackMap.set(e,t),!0)},u.stop=function(e){return 0===e?this.stopMusic():this.stopEffect(e)},u.pause=function(e){return 0===e?this.pauseMusic():this.pauseEffect(e)},u.resume=function(e){return 0===e?this.resumeMusic():this.resumeEffect(e)},u.pauseAll=function(){this.pauseMusic(),this.pauseAllEffects()},u.resumeAll=function(){this.resumeMusic(),this.resumeAllEffects()},u.stopAll=function(){this.stopMusic(),this.stopAllEffects()},u.setVolume=function(e,t){return 0===e?this.setMusicVolume(t):this.setEffectVolume(e,t)},u.getVolume=function(e){return 0===e?this.getMusicVolume():this.getEffectVolume(e)},u.setVolumeScale=function(e,t){return 0===e?this.setMusicVolumeScale(t):this.setEffectVolumeScale(e,t)},u.getVolumeScale=function(e){return 0===e?this.getMusicVolumeScale():this.getEffectVolumeScale(e)},t(e,null,[{key:"inst",get:function(){return this._inst||(this._inst=new e),this._inst}}]),e}())._inst=null,u._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Audio.ts"],(function(t){var n,i,u;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy},function(t){u=t.default}],execute:function(){i._RF.push({},"5902c7PSWZGdZWpqw8PJxhX","AudioManager",void 0),t("default",function(){function t(){this.audioArray=[]}var i=t.prototype;return i.getAudio=function(){return this.audioArray.length?this.audioArray.pop():new u},i.putAudio=function(t){t.clear(),this.audioArray.push(t)},n(t,null,[{key:"inst",get:function(){return this._inst||(this._inst=new t),this._inst}}]),t}())._inst=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseAppInit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./BaseManager.ts"],(function(t){var e,n,i,a,s,r,o,u,f,c,l,_,d,p;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,a=t._decorator,s=t.settings,r=t.Settings,o=t.assetManager,u=t.Button,f=t.Node,c=t.isValid,l=t.EventTouch,_=t.Component},function(t){d=t.default},function(t){p=t.default}],execute:function(){var h;i._RF.push({},"2110bB6HGxDDrnZkm2wbIsw","BaseAppInit",void 0);var g=a.ccclass,m="app-admin",b="app-model",T="app-control",y="app-controller",v="app-manager";t("default",g("BaseAppInit")(h=function(t){function i(){var e;return(e=t.call(this)||this)._base_completed=0,e._base_completed_cache=0,e._base_inited=!1,e._base_finished=!1,e}e(i,t);var a=i.prototype;return a.startInit=function(){var t=this,e=s.querySettings(r.Category.ASSETS,"projectBundles");d.inst.lib.task.createAny().add([function(t,n){if(-1===e.indexOf(T))return t();o.preloadAny({url:T},{ext:"bundle"},null,(function(e){if(e)return n(.1);t()}))},function(t,n){if(-1===e.indexOf(y))return t();o.preloadAny({url:y},{ext:"bundle"},null,(function(e){if(e)return n(.1);t()}))},function(t,n){if(-1===e.indexOf(b))return t();o.preloadAny({url:b},{ext:"bundle"},null,(function(e){if(e)return n(.1);t()}))},function(t,n){if(-1===e.indexOf(m))return t();o.preloadAny({url:m},{ext:"bundle"},null,(function(e){if(e)return n(.1);t()}))},function(t,n){if(-1===e.indexOf(v))return t();o.preloadAny({url:v},{ext:"bundle"},null,(function(e){if(e)return n(.1);t()}))}]).add((function(t,n){if(-1===e.indexOf(T))return t();o.loadBundle(T,(function(e){if(e)return n(.1);t()}))})).add((function(t,n){if(-1===e.indexOf(y))return t();o.loadBundle(y,(function(e){if(e)return n(.1);t()}))})).add((function(t,n){if(-1===e.indexOf(b))return t();o.loadBundle(b,(function(e){if(e)return n(.1);t()}))})).add((function(t,n){if(-1===e.indexOf(m))return t();o.loadBundle(m,(function(e){if(e)return n(.1);t()}))})).add((function(t){p.init(v,t)})).start((function(){t._base_inited=!0,t.onProgress(0,t._base_total),p.initManagers((function(){t.nextInit()}),(function(){t._base_user_total<=0||t.onUserInit(t._base_completed-t._base_mgr_total)}))}))},a.nextInit=function(){var t=this;if(!this._base_finished)if(this._base_inited){if(this._base_completed+=1,this.onProgress(this._base_completed+this._base_completed_cache,this._base_total),this._base_completed+this._base_completed_cache>=this._base_total){if(this._base_finished=!0,d.emit(d.EventType.EVENT_APPINIT_FINISHED),d.inst.Manager.Sound.setting.defaultEffectName){var e=function(t){!1!==t.target.useDefaultEffect&&d.inst.manager.ui.onceUserInterface(f.EventType.TOUCH_END,(function(t){t.target.getComponent(u)&&setTimeout((function(){c(d.inst.manager.sound)&&t.eventPhase!==l.CAPTURING_PHASE&&d.inst.manager.sound.playDefaultEffect()}))}),null,!0)},n=u.prototype.onEnable;u.prototype.onEnable=function(){n.call(this),this.node.on(f.EventType.TOUCH_START,e)};var i=u.prototype.onDisable;u.prototype.onDisable=function(){this.node.off(f.EventType.TOUCH_START,e),i.call(this)}}return d.inst.manager.ui.showDefault((function(){if(t.onFinish(),d.inst.Manager.Sound.setting.defaultMusicName){var e=function t(){var e=this;c(d.inst.manager.sound)&&(d.inst.manager.sound.isMusicPlaying&&!d.inst.manager.sound.isMusicPaused?d.inst.manager.sound.replayMusic((function(){d.inst.manager.ui.offUserInterface(f.EventType.TOUCH_START,t,e,!0)})):d.inst.manager.ui.offUserInterface(f.EventType.TOUCH_START,t,this,!0))};d.inst.manager.ui.onUserInterface(f.EventType.TOUCH_START,e,t,!0),d.inst.manager.sound.playDefaultMusic((function(){d.inst.manager.ui.offUserInterface(f.EventType.TOUCH_START,e,t,!0)}))}}))}this._base_completed>this._base_mgr_total&&this.onUserInit(this._base_completed+this._base_completed_cache-this._base_mgr_total)}else this._base_completed_cache+=1},a.start=function(){this.startInit()},a.onProgress=function(t,e){return t/e},a.onUserInit=function(t){return t},a.getUserAssetNum=function(){return 0},a.onFinish=function(){},n(i,[{key:"_base_user_total",get:function(){return Math.max(0,this.getUserAssetNum())}},{key:"_base_mgr_total",get:function(){return Math.max(0,p.getTotalAssetNum())}},{key:"_base_total",get:function(){return this._base_mgr_total+this._base_user_total}}]),i}(_))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseControl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){i=t.cclegacy}],execute:function(){t("default",(function(t){var i;return(i=function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),e(i,null,[{key:"inst",get:function(){return null===this._base_inst&&(this._base_inst=new this),this._base_inst}}]),i}(a)).Event=t,i._base_inst=null,i})),i._RF.push({},"fb103m5F/JDta0mjXTmkbT1","BaseControl",void 0);var s=function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1),this.callback=null,this.target=null,this.once=!1,this.callback=t,this.target=n,this.once=e},l=function(){function t(){this.callbacks=[]}var n=t.prototype;return n.size=function(){return this.callbacks.length},n.add=function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1),this.callbacks.push(new s(t,n,e))},n.emit=function(t){for(var n=0;n<this.callbacks.length;n++){var e=this.callbacks[n];e.once&&(this.callbacks.splice(n,1),--n),e.callback&&e.callback.apply(e.target,t)}},n.call=function(t){if(0!==this.callbacks.length){var n=this.callbacks[0];if(n.once&&this.callbacks.splice(0,1),n.callback)return n.callback.apply(n.target,t)}},n.remove=function(t,n){void 0===n&&(n=null);for(var e=this.callbacks.length-1;e>=0;e--){var i=this.callbacks[e];i.callback===t&&i.target===n&&this.callbacks.splice(e,1)}},n.removeByCallback=function(t){for(var n=this.callbacks.length-1;n>=0;n--){this.callbacks[n].callback===t&&this.callbacks.splice(n,1)}},n.removeByTarget=function(t){for(var n=this.callbacks.length-1;n>=0;n--){this.callbacks[n].target===t&&this.callbacks.splice(n,1)}},t}(),r=function(){function t(){this.listeners={}}var n=t.prototype;return n.on=function(t,n,e){t.toString()&&n&&(this.listeners[t]||(this.listeners[t]=new l),this.listeners[t].add(n,e))},n.once=function(t,n,e){t.toString()&&n&&(this.listeners[t]||(this.listeners[t]=new l),this.listeners[t].add(n,e,!0))},n.off=function(t,n,e){t.toString()&&n&&this.listeners[t]&&this.listeners[t].remove(n,e)},n.targetOff=function(t){if(t)for(var n in this.listeners){if(Object.prototype.hasOwnProperty.call(this.listeners,n))this.listeners[n].removeByTarget(t)}},n.emit=function(t,n){t.toString()&&this.listeners[t]&&this.listeners[t].emit(n)},n.call=function(t,n){if(t.toString()&&this.listeners[t])return this.listeners[t].call(n)},t}(),a=function(){function t(){this.e=void 0,this.t=void 0,this.event=new r}var n=t.prototype;return n.call=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];return this.event.call.call(this.event,t,e)},n.emit=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];return this.event.emit.call(this.event,t,e)},n.on=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this.event.on.apply(this.event,n)},n.once=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this.event.once.apply(this.event,n)},n.off=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this.event.off.apply(this.event,n)},n.targetOff=function(t){return this.event.targetOff.call(this.event,t)},t}();i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){r=t.cclegacy}],execute:function(){t("default",(function(){var t;return(t=function(t){function r(){return t.apply(this,arguments)||this}return n(r,t),e(r,null,[{key:"inst",get:function(){return null===this._base_inst&&(this._base_inst=new this),this._base_inst}}]),r}(l)).Event=new Proxy({},{get:function(t,n){return t[n]?t[n]:(t[n]=n,n)}}),t._base_inst=null,t})),r._RF.push({},"a7da7CB5gRIfo4MfUWP27NW","BaseController",void 0);var i=function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1),this.callback=null,this.target=null,this.once=!1,this.callback=t,this.target=n,this.once=e},o=function(){function t(){this.callbacks=[]}var n=t.prototype;return n.size=function(){return this.callbacks.length},n.add=function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1),this.callbacks.push(new i(t,n,e))},n.emit=function(t){for(var n=0;n<this.callbacks.length;n++){var e=this.callbacks[n];e.once&&(this.callbacks.splice(n,1),--n),e.callback&&e.callback.apply(e.target,t)}},n.call=function(t){if(0!==this.callbacks.length){var n=this.callbacks[0];if(n.once&&this.callbacks.splice(0,1),n.callback)return n.callback.apply(n.target,t)}},n.remove=function(t,n){void 0===n&&(n=null);for(var e=this.callbacks.length-1;e>=0;e--){var r=this.callbacks[e];r.callback===t&&r.target===n&&this.callbacks.splice(e,1)}},n.removeByCallback=function(t){for(var n=this.callbacks.length-1;n>=0;n--){this.callbacks[n].callback===t&&this.callbacks.splice(n,1)}},n.removeByTarget=function(t){for(var n=this.callbacks.length-1;n>=0;n--){this.callbacks[n].target===t&&this.callbacks.splice(n,1)}},t}(),s=function(){function t(){this.listeners={}}var n=t.prototype;return n.on=function(t,n,e){t.toString()&&n&&(this.listeners[t]||(this.listeners[t]=new o),this.listeners[t].add(n,e))},n.once=function(t,n,e){t.toString()&&n&&(this.listeners[t]||(this.listeners[t]=new o),this.listeners[t].add(n,e,!0))},n.off=function(t,n,e){t.toString()&&n&&this.listeners[t]&&this.listeners[t].remove(n,e)},n.targetOff=function(t){if(t)for(var n in this.listeners){if(Object.prototype.hasOwnProperty.call(this.listeners,n))this.listeners[n].removeByTarget(t)}},n.emit=function(t,n){t.toString()&&this.listeners[t]&&this.listeners[t].emit(n)},n.call=function(t,n){if(t.toString()&&this.listeners[t])return this.listeners[t].call(n)},t}(),l=function(){function t(){this.t=void 0,this.event=new s}var n=t.prototype;return n.call=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return this.event.call.call(this.event,t,e)},n.emit=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return this.event.emit.call(this.event,t,e)},n.on=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this.event.on.apply(this.event,n)},n.once=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this.event.once.apply(this.event,n)},n.off=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this.event.off.apply(this.event,n)},n.targetOff=function(t){return this.event.targetOff.call(this.event,t)},e(t,[{key:"log",get:function(){return window.console.log.bind(window.console,"%c %s %c %s ","background:#4682b4; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #4682b4; color: #fff; font-weight: normal;","["+this.constructor.name+"] LOG "+(new Date).toLocaleString(),"background:#ffffff; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #4682b4; color: #4682b4; font-weight: normal;")}},{key:"warn",get:function(){return window.console.warn.bind(window.console,"%c %s %c %s ","background:#ff7f50; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff7f50; color: #fff; font-weight: normal;","["+this.constructor.name+"] WARN "+(new Date).toLocaleString(),"background:#ffffff; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff7f50; color: #ff7f50; font-weight: normal;")}},{key:"error",get:function(){return window.console.error.bind(window.console,"%c %s %c %s ","background:#ff4757; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff4757; color: #fff; font-weight: normal;","["+this.constructor.name+"] ERROR "+(new Date).toLocaleString(),"background:#ffffff; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff4757; color: #ff4757; font-weight: normal;")}}]),t}();r._RF.pop()}}}));

System.register("chunks:///_virtual/BaseManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts"],(function(n){var e,o,t,r,a,i,s,d,f,c,l,u,g,p,b,h;return{setters:[function(n){e=n.inheritsLoose,o=n.assertThisInitialized,t=n.createClass},function(n){r=n.cclegacy,a=n._decorator,i=n.EventTarget,s=n.js,d=n.Widget,f=n.settings,c=n.assetManager,l=n.Prefab,u=n.find,g=n.path,p=n.instantiate,b=n.Component},function(n){h=n.default}],execute:function(){var x,w;r._RF.push({},"302056smx5PRICBe3D/jWxS","BaseManager",void 0);var m=a.ccclass,_=new(function(){function n(){this.index=0}return n.prototype.create=function(){return this.index++>1e7&&(this.index=0),Date.now()+"-"+this.index},n}()),E=(window.console.log.bind(window.console,"%c %s %c %s ","background:#32cd32; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #32cd32; color: #fff; font-weight: normal;","[BaseManager] 下载开始 "+(new Date).toLocaleString(),"background:#ffffff; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #32cd32; color: #32cd32; font-weight: normal;"),window.console.log.bind(window.console,"%c %s %c %s ","background:#00ae9d; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #00ae9d; color: #fff; font-weight: normal;","[BaseManager] 下载完成 "+(new Date).toLocaleString(),"background:#ffffff; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #00ae9d; color: #00ae9d; font-weight: normal;"),window.console.log.bind(window.console,"%c %s %c %s ","background:#ff4757; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff4757; color: #fff; font-weight: normal;","[BaseManager] 下载失败 "+(new Date).toLocaleString(),"background:#ffffff; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff4757; color: #ff4757; font-weight: normal;"));window.console.log.bind(window.console,"%c %s %c %s ","background:#3e4145; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #3e4145; color: #fff; font-weight: normal;","[BaseManager] 初始化开始 "+(new Date).toLocaleString(),"background:#ffffff; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #3e4145; color: #3e4145; font-weight: normal;"),window.console.log.bind(window.console,"%c %s %c %s ","background:#008080; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #008080; color: #fff; font-weight: normal;","[BaseManager] 初始化完成 "+(new Date).toLocaleString(),"background:#ffffff; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #008080; color: #008080; font-weight: normal;"),n("default",m("BaseManager")(((w=function(n){function r(){var e;if((e=n.call(this)||this)._base_event=new i,e._base_manager_name=s.getClassName(o(e)),"Manager"!==e._base_manager_name&&"Manager"===e._base_manager_name.slice(-7)){var t=e._base_manager_name.slice(0,-7);h.inst.Manager[t]=e.constructor,h.inst.manager[t.toLocaleLowerCase()]=o(e)}return e}e(r,n);var a=r.prototype;return a.resetInEditor=function(){var n=this.node.getComponent(d)||this.node.addComponent(d);n.isAlignBottom=!0,n.isAlignLeft=!0,n.isAlignRight=!0,n.isAlignTop=!0,n.top=0,n.left=0,n.right=0,n.bottom=0,n.alignMode=d.AlignMode.ON_WINDOW_RESIZE},a.onInited=function(){},a.onFinished=function(){},a.init=function(n){n&&n()},a.createUUID=function(){return _.create()},a.emit=function(n){for(var e,o=arguments.length,t=new Array(o>1?o-1:0),r=1;r<o;r++)t[r-1]=arguments[r];(e=this._base_event).emit.apply(e,[n].concat(t))},a.on=function(n,e,o){this._base_event.on(n,e,o)},a.once=function(n,e,o){this._base_event.once(n,e,o)},a.off=function(n,e,o){this._base_event.off(n,e,o)},a.targetOff=function(n){this._base_event.targetOff(n)},r.stringCase=function(n,e){return void 0===e&&(e=!1),(n=n.replace(/-/g,"_")).split("_").map((function(n,o){return 0===o&&e?n.charAt(0).toLocaleLowerCase()+n.slice(1):n.charAt(0).toLocaleUpperCase()+n.slice(1)})).join("")},r.stringCaseNegate=function(n){return n.replace(/[A-Z]/g,(function(n,e){return 0===e?n.toLocaleLowerCase():"-"+n.toLocaleLowerCase()}))},r.init=function(n,e){var o=this;if(this.bundle=null,-1===f.querySettings("assets","projectBundles").indexOf(n))return e&&e();h.inst.lib.task.execute((function(t){c.loadBundle(n,(function(n,r){if(n)return t(1);o.bundle=r,e&&e()}))}))},r.getTotalAssetNum=function(){var n=this.sysMgrCount;return this.bundle?(this.bundle.getDirWithPath("/",l).forEach((function(e){e.path.endsWith("Manager")&&n++})),n):n},r.getUserAssetUrls=function(){var n=[];return this.bundle?(this.bundle.getDirWithPath("/",l).forEach((function(e){e.path.endsWith("Manager")&&n.push(e.path)})),n):n},r.initManagers=function(n,e){var o=this.bundle,t=this.getUserAssetUrls(),a=t.length+this.sysMgrCount,i=0,s=function(e,o){return function(){o.onInited(),n&&n(++i,a),e()}},d=[],f=[h.inst.manager.event,h.inst.manager.timer,h.inst.manager.loader,h.inst.manager.ui,h.inst.manager.sound],c=h.inst.lib.task.createASync();f.forEach((function(n){c.add((function(e){n.init(s(e,n))}))}));var b=h.inst.lib.task.createASync(),x=u("Root2D/UserManager");t.forEach((function(n){b.add((function(e,t){o.load(n,l,(function(o,a){if(o||!a)E(g.basename(n),"重试..."),t(1);else{var i=p(a);i.parent=x,i.active=!0,d.push(i.getComponent(r)),e()}}))}))})),h.inst.lib.task.createAny().add([function(n){return c.start(n)},function(n){return b.start(n)}]).add((function(n){h.emit(h.EventType.EVENT_SYS_MANAGER_INITED),n()})).add((function(n){var e=h.inst.lib.task.createASync();d.forEach((function(n){e.add((function(e){n.init(s(e,n))}))})),e.start(n)})).add((function(n){h.emit(h.EventType.EVENT_USER_MANAGER_INITED),h.emit(h.EventType.EVENT_MANAGER_INITED),n()})).add((function(n){f.forEach((function(n){n.onFinished()})),d.forEach((function(n){n.onFinished()})),n()})).start((function(){h.emit(h.EventType.EVENT_MANAGER_FINISHED),e&&e(a)}))},t(r,[{key:"managerName",get:function(){return this._base_manager_name}},{key:"log",get:function(){return window.console.log.bind(window.console,"%c %s %c %s ","background:#4169e1; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #4169e1; color: #fff; font-weight: normal;","["+this._base_manager_name+"] LOG "+(new Date).toLocaleString(),"background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #4169e1; color: #4169e1; font-weight: normal;")}},{key:"warn",get:function(){return window.console.warn.bind(window.console,"%c %s %c %s ","background:#ff7f50; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff7f50; color: #fff; font-weight: normal;","["+this._base_manager_name+"] WARN "+(new Date).toLocaleString(),"background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff7f50; color: #ff7f50; font-weight: normal;")}},{key:"error",get:function(){return window.console.error.bind(window.console,"%c %s %c %s ","background:#ff4757; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff4757; color: #fff; font-weight: normal;","["+this._base_manager_name+"] ERROR "+(new Date).toLocaleString(),"background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff4757; color: #ff4757; font-weight: normal;")}}],[{key:"sysMgrCount",get:function(){return 5}}]),r}(b)).bundle=null,x=w))||x);r._RF.pop()}}}));

System.register("chunks:///_virtual/BaseModel.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"7a377zr4IZOcZm99E2rQNJP","BaseModel",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/BaseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts"],(function(e){var i,t,n,o,s,r,a,u,h,c,l,d,f,p,_,w,g,b,v;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.assertThisInitialized,o=e.initializerDefineProperty,s=e.createClass},function(e){r=e.cclegacy,a=e._decorator,u=e.Node,h=e.Enum,c=e.js,l=e.Scene,d=e.director,f=e.UITransform,p=e.Font,_=e.isValid,w=e.sp,g=e.SpriteFrame,b=e.Component},function(e){v=e.default}],execute:function(){var m,y,P,S,E,x,O,k,T,D,H,V,M,A;r._RF.push({},"eddc0QRQjlCPYcQd/35Kv/C","BaseView",void 0);var C=a.ccclass,I=a.property,F=[u.EventType.TOUCH_START,u.EventType.TOUCH_MOVE,u.EventType.TOUCH_END,u.EventType.TOUCH_CANCEL,u.EventType.MOUSE_DOWN,u.EventType.MOUSE_MOVE,u.EventType.MOUSE_UP,u.EventType.MOUSE_ENTER,u.EventType.MOUSE_LEAVE,u.EventType.MOUSE_WHEEL],R=h({destroy:1,active:2}),U=e("ViewType",function(e){return e.Page="Page",e.Paper="Paper",e.PaperAll="PaperAll",e.Pop="Pop",e.Top="Top",e}({})),N=function(e){return e[e.BeforeShow=0]="BeforeShow",e[e.Showing=1]="Showing",e[e.Showed=2]="Showed",e[e.BeforeHide=3]="BeforeHide",e[e.Hiding=4]="Hiding",e[e.Hid=5]="Hid",e}(N||{}),L={id:"BaseView",name:"Settings",displayOrder:-1/0,style:"section"},B=new Map;e("default",(m=C("BaseView"),y=I({group:L,type:R,tooltip:"何种模式隐藏节点\n1、destroy: 销毁UI并释放对应的所有资源\n2、active: 缓存UI并加速下次的打开速度"}),P=I({group:L,tooltip:"是否是单例模式\n1、单例模式: UI只会被创建一次(onShow会被重复触发)\n2、非单例模式: UI会被重复创建"}),S=I({group:L,tooltip:"是否捕获焦点<响应onLostFocus和onFocus>\n1、当一个捕获焦点的UI处于最上层并展示时\n下层的UI永远不会响应focus事件",visible:function(){return!this.is3D()}}),E=I({group:L,tooltip:"是否需要底层遮罩",visible:function(){return!this.is3D()&&!this.isPage()}}),x=I({group:L,tooltip:"是否禁止点击事件向下层传递",visible:function(){return!this.is3D()}}),m(((A=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return(i=e.call.apply(e,[this].concat(s))||this)._isOnCreateCalled=!1,i._base_view_state=N.Hid,i._base_view_name=c.getClassName(n(i)),i._base_touch_enable=!0,i._base_show_hide_delays=[],i._base_mini_show=new Set,o(i,"_hideEvent",T,n(i)),o(i,"_singleton",D,n(i)),o(i,"_captureFocus",H,n(i)),o(i,"_shade",V,n(i)),o(i,"_blockInput",M,n(i)),i.miniViews=[],i}t(i,e),i.BindControl=function(e){return function(i){function n(){return i.apply(this,arguments)||this}return t(n,i),s(n,[{key:"control",get:function(){return e?e.inst:null}}]),n}(i)},i.BindController=function(e){return function(i){function n(){return i.apply(this,arguments)||this}return t(n,i),s(n,[{key:"controller",get:function(){return e?e.inst:null}}]),n}(i)},i.isViewValid=function(e,i){e&&e(!0)},i.isPage=function(e){return 0===e.indexOf(U.Page)},i.isPaper=function(e){return 0===e.indexOf(U.Paper)},i.isPaperAll=function(e){return 0===e.indexOf(U.PaperAll)},i.isPop=function(e){return 0===e.indexOf(U.Pop)},i.isTop=function(e){return 0===e.indexOf(U.Top)};var r=i.prototype;return r.isPage=function(){return i.isPage(this._base_view_name)},r.isPaper=function(){return i.isPaper(this._base_view_name)},r.isPaperAll=function(){return i.isPaperAll(this._base_view_name)},r.isPop=function(){return i.isPop(this._base_view_name)},r.isTop=function(){return i.isTop(this._base_view_name)},r.is2D=function(){return!this.is3D()},r.is3D=function(){return this.node.parent instanceof l?this.node.parent.name===this.viewName:d.getScene().name===this.viewName},r.isMiniViewShow=function(e){return this._base_mini_show.has(e)},r.resetInEditor=function(){},r.setTouchEnabled=function(e){void 0===e&&(e=!0),this._base_touch_enable=!!e},r.blockPropagation=function(e){this.blockInput&&(e.propagationStopped=!0,e.type===u.EventType.TOUCH_START&&this.log("阻断触摸向下层传递"))},r.stopPropagation=function(e){this._base_touch_enable||(e.propagationStopped=!0,e.propagationImmediateStopped=!0,e.type===u.EventType.TOUCH_START&&this.log("屏蔽触摸"))},r.onCreate=function(){var e=this;if(!this.is3D()){var i=this.getComponent(f);i&&(i.hitTest=function(){if(e.blockInput){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return f.prototype.hitTest.apply(i,n)}return!1});for(var t=0;t<F.length;t++)this.node.on(F[t],this.blockPropagation,this),this.node.on(F[t],this.stopPropagation,this,!0)}},r.hideAllMiniViews=function(e){this._base_mini_show.forEach((function(i){v.inst.manager.ui.hide({name:i,data:e})})),this._base_mini_show.clear()},r.hideMiniViews=function(e){var i=this,t=e.data,n=e.views;0!==this.miniViews.length&&0!==n.length&&n.forEach((function(e){-1!==i.miniViews.indexOf(e)?i._base_mini_show.has(e)&&v.inst.manager.ui.hide({name:e,data:t}):i.warn("hideMiniViews",e+"不在miniViews中, 已跳过")}))},r.showMiniViews=function(e){var i=this,t=e.data,n=e.views,o=e.onShow,s=e.onHide,r=e.onFinish;if(0===n.length)return!1;if(this.typeName!==U.Page)return this.warn("showMiniViews","仅支持Page类型"),!1;for(var a=v.inst.lib.task.createSync(),u=function(){var e=n[h];e instanceof Array?a.add((function(n){i.createMixMiniViewsTask(e,t,o,s).start(n)})):a.add((function(n){i.createMixMiniViewsTask([e],t,o,s).start(n)}))},h=0;h<n.length;h++)u();return a.start(r&&function(){r()}),!0},r.createMixMiniViewsTask=function(e,t,n,o){var s=this;void 0===e&&(e=[]);var r=v.inst.lib.task.createSync();return this.typeName!==U.Page?(this.warn("showMiniViews","仅支持Page类型"),r):(0===(e=e.filter((function(e){return e?s._base_mini_show.has(e)?(s.warn("showMiniViews","重复融合"+e+", 已跳过"),!1):-1===s.miniViews.indexOf(e)?(s.warn("showMiniViews",e+"不在miniViews中, 已跳过"),!1):e.indexOf(s.baseName)!==U.Paper.length&&0!==e.indexOf(U.PaperAll)?(s.warn("showMiniViews",e+"不属于当前Page, 已跳过"),!1):(s._base_mini_show.add(e),!0):(s.warn("showMiniViews","name不能为空"),!1)}))).length||(r.add((function(i){var t=v.inst.lib.task.createASync();e.forEach((function(e){t.add((function(i,t){s.log("下载子页面: "+e),v.inst.manager.ui.load(e,(function(e){e?i():s.scheduleOnce(t,.1)}))}))})),t.start(i)})),r.add((function(r){var a=v.inst.lib.task.createASync();e.forEach((function(e){a.add((function(r){var a;if(null==(a=s._base_mini_show)||!a.has(e))return r();s.log("展示子页面: "+e),i.isPaperAll(e)&&B.set(e,s.uuid),v.inst.manager.ui.show({name:e,data:t,silent:!0,attr:{zIndex:s.miniViews.indexOf(e)},onShow:function(i){n&&n(e,i),r()},onHide:function(t){var n;if(i.isPaperAll(e)){var r=B.get(e);r&&r===s.uuid&&B.delete(e)}null==(n=s._base_mini_show)||n.delete(e),o&&o(e,t)},onError:function(t,n){var o;if(n===v.inst.Manager.UI.ErrorCode.LoadError)return!0;if(i.isPaperAll(e)){var a=B.get(e);a&&a===s.uuid&&(B.delete(e),v.inst.manager.ui.hide({name:e}))}null==(o=s._base_mini_show)||o.delete(e),s.warn("忽略子页面",e,t),r()}})}))})),a.start(r)}))),r)},r.setNodeAttr=function(e){e&&("number"==typeof e.zIndex&&this.node.position.set(this.node.position.x,this.node.position.y,e.zIndex),"number"==typeof e.siblingIndex&&this.node.setSiblingIndex(e.siblingIndex))},r.show=function(e,i,t,n,o){var s=this;if(this._base_view_state===N.Showed||this._base_view_state===N.Hid){var r=this._base_view_state===N.Hid;r&&(this._base_view_state=N.BeforeShow);this.log("beforeShow");var a=!1;this.beforeShow((function(u){if(a)return s.error("beforeShow","next被重复调用");a=!0,function(a){if(a||s.isPaperAll()&&s.node.emit("onHide"),o&&o(a),a)r&&(s._base_view_state=N.Hid);else{r&&(s._base_view_state=N.Showing),n&&s.node.once("onHide",n),!1===s._isOnCreateCalled&&(s._isOnCreateCalled=!0,s.onCreate()),s.setNodeAttr(i),!0!==s.node.active&&(s.node.active=!0),s.log("onShow");var u=null;try{u=s.onShow(e)}catch(e){s.onError(),console.error(e)}v.inst.manager.ui.refreshShade();try{t&&t(u),s.node.emit("onShow",u),v.inst.manager.ui.emit(s._base_view_name,{event:"onShow",result:u}),v.inst.manager.ui.emit("onShow",{name:s._base_view_name,result:u})}catch(e){console.error(e)}r&&(s._base_view_state=N.Showed)}s._base_show_hide_delays.length>0&&s._base_show_hide_delays.shift()()}(u||null)}),e)}else this._base_show_hide_delays.push(this.show.bind(this,e,i,t,n,o))},r.hide=function(e,i){if(this._base_view_state===N.Hid||this._base_view_state===N.Showed){var t,n=this._base_view_state===N.Showed;if(n&&(this._base_view_state=N.BeforeHide),this.log("beforeHide"),this.beforeHide(e))n&&(this._base_view_state=N.Showed);else{this.log("onHide"),n&&(this._base_view_state=N.Hiding),this.hideAllMiniViews(e);var o=null;try{o=this.onHide(e)}catch(t){console.error(t)}try{i&&i(o),this.node.emit("onHide",o),v.inst.manager.ui.emit(this._base_view_name,{event:"onHide",result:o}),v.inst.manager.ui.emit("onHide",{name:this._base_view_name,result:o})}catch(t){console.error(t)}n&&(this._base_view_state=N.Hid),this.hideEvent===R.active?this.node.active=!1:this.hideEvent===R.destroy&&v.inst.manager.ui.release(this),v.inst.manager.ui.refreshShade()}this._base_show_hide_delays.length>0&&this._base_show_hide_delays.shift()()}else this._base_show_hide_delays.push(this.hide.bind(this,e,i))},r.focus=function(e){var i=null,t="";e?(i=this.onFocus(),t="onFocus"):(i=this.onLostFocus(),t="onLostFocus"),this.node.emit(t,i),v.inst.manager.ui.emit(this._base_view_name,{event:t,result:i}),v.inst.manager.ui.emit(t,{name:this._base_view_name,result:i})},r.loadRes=function(e,i,t){v.inst.manager.ui.loadRes(this,e,i,t)},r.preloadRes=function(e,i){v.inst.manager.ui.preloadRes(this,e,i)},r.loadResDir=function(e,i,t){v.inst.manager.ui.loadResDir(this,e,i,t)},r.preloadResDir=function(e,i){v.inst.manager.ui.preloadResDir(this,e,i)},r.setFont=function(e,i,t){this.loadRes(i,p,(function(i){if(!i||!_(e))return t&&t(!1);e.font=i,t&&t(!0)}))},r.setSpine=function(e,i,t){this.loadRes(i,w.SkeletonData,(function(i){if(!i||!_(e))return t&&t(!1);e.skeletonData=i,t&&t(!0)}))},r.setSprite=function(e,i,t){this.loadRes(i,g,(function(i){if(!i||!_(e))return t&&t(!1);e.spriteFrame=i,t&&t(!0)}))},r.onShow=function(e){return e},r.onHide=function(e){return e},r.onLostFocus=function(){return!0},r.onFocus=function(){return!0},r.beforeShow=function(e,i){e(null)},r.beforeHide=function(e){return null},r.onError=function(){},r.onShade=function(){return{}},s(i,[{key:"hideEvent",get:function(){return this.is3D()?R.destroy:this._hideEvent},set:function(e){this.is3D()&&e!==R.destroy?this.log("3D模式下只能是destroy模式"):this._hideEvent=e}},{key:"singleton",get:function(){return!!this.isPage()||(!!this.isPaperAll()||(!!this.isPaper()||this._singleton&&this.constructor._singleton))},set:function(e){if(!e){if(this.isPage())return void this.log("Page只能是单例模式");if(this.isPaper())return void this.log("Paper只能是单例模式")}this._singleton=this.constructor._singleton=!!e}},{key:"captureFocus",get:function(){return!this.is3D()&&this._captureFocus},set:function(e){e&&this.is3D()?this.log("只有2D模式下才可以捕获焦点"):this._captureFocus=e}},{key:"shade",get:function(){return!this.is3D()&&(!this.isPage()&&this._shade)},set:function(e){if(e){if(this.is3D())return void this.log("只有2D模式下才可以设置底层遮罩");if(this.isPage())return void this.log("Page不可以设置底层遮罩")}var i;this._shade!==e?(this._shade=e,null==(i=v.inst)||null==(i=i.manager)||null==(i=i.ui)||i.refreshShade()):this._shade=e}},{key:"blockInput",get:function(){return!this.is3D()&&this._blockInput},set:function(e){e&&this.is3D()?this.log("只有2D模式下才可以设置阻断点击事件"):this._blockInput=e}},{key:"viewName",get:function(){return this._base_view_name}},{key:"baseName",get:function(){return this._base_view_name.slice(this.typeName.length)}},{key:"typeName",get:function(){return 0===this._base_view_name.indexOf(U.Paper)?U.Paper:0===this._base_view_name.indexOf(U.Pop)?U.Pop:0===this._base_view_name.indexOf(U.Top)?U.Top:U.Page}},{key:"isSingleton",get:function(){return this.singleton}},{key:"isCaptureFocus",get:function(){return this.captureFocus}},{key:"isNeedShade",get:function(){return this.shade}},{key:"isShow",get:function(){return this._base_view_state!=N.Hid}},{key:"log",get:function(){return window.console.log.bind(window.console,"%c %s %c %s ","background:#1e90ff; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #1e90ff; color: #fff; font-weight: normal;","["+this._base_view_name+"] LOG "+(new Date).toLocaleString(),"background:#ffffff; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #1e90ff; color: #1e90ff; font-weight: normal;")}},{key:"warn",get:function(){return window.console.warn.bind(window.console,"%c %s %c %s ","background:#ff7f50; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff7f50; color: #fff; font-weight: normal;","["+this._base_view_name+"] WARN "+(new Date).toLocaleString(),"background:#ffffff; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff7f50; color: #ff7f50; font-weight: normal;")}},{key:"error",get:function(){return window.console.error.bind(window.console,"%c %s %c %s ","background:#ff4757; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff4757; color: #fff; font-weight: normal;","["+this._base_view_name+"] ERROR "+(new Date).toLocaleString(),"background:#ffffff; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff4757; color: #ff4757; font-weight: normal;")}}]),i}(b))._singleton=!0,T=i((k=A).prototype,"_hideEvent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.destroy}}),i(k.prototype,"hideEvent",[y],Object.getOwnPropertyDescriptor(k.prototype,"hideEvent"),k.prototype),D=i(k.prototype,"_singleton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i(k.prototype,"singleton",[P],Object.getOwnPropertyDescriptor(k.prototype,"singleton"),k.prototype),H=i(k.prototype,"_captureFocus",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i(k.prototype,"captureFocus",[S],Object.getOwnPropertyDescriptor(k.prototype,"captureFocus"),k.prototype),V=i(k.prototype,"_shade",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i(k.prototype,"shade",[E],Object.getOwnPropertyDescriptor(k.prototype,"shade"),k.prototype),M=i(k.prototype,"_blockInput",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i(k.prototype,"blockInput",[x],Object.getOwnPropertyDescriptor(k.prototype,"blockInput"),k.prototype),O=k))||O));r._RF.pop()}}}));

System.register("chunks:///_virtual/Body.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,h,n;return{setters:[function(t){i=t.createClass},function(t){h=t.cclegacy,n=t.EventTarget}],execute:function(){h._RF.push({},"09550PDi3ZIdrDiWtkh4h7n","Body",void 0);var s=function(){function t(){}return t.create=function(){return++this.value>1e10&&(this.value=1),this.value},t}();s.value=0;var e=t("BodyEvent",function(t){return t[t.AABB_CHANGED=0]="AABB_CHANGED",t}({}));t("Body",function(){function t(t){this._xMin=0,this._yMin=0,this._zMin=0,this._xMid=0,this._yMid=0,this._zMid=0,this._xMax=0,this._yMax=0,this._zMax=0,this._width=0,this._height=0,this._depth=0,this.id=0,this.group=1,this.mask=1,this.data=void 0,this.event=new n,this.id="number"==typeof t?t:s.create()}t.emit=function(t,i,h,n,s,e,_){t.event.emit(i,h,n,s,e,_)},t.on=function(t,i,h,n){t.event.on(i,h,n)},t.once=function(t,i,h,n){t.event.once(i,h,n)},t.off=function(t,i,h,n){t.event.off(i,h,n)},t.targetOff=function(t,i){t.event.targetOff(i)};var h=t.prototype;return h.setID=function(t){return this.id=t,this},h.setGroup=function(t){return this.group=t,this},h.setMask=function(t){return this.mask=t,this},h.setData=function(t){return this.data=t,this},h.setRect=function(t){return t?(this._xMin=t.xMin,this._yMin=t.yMin,this._zMin=0,this._xMax=t.xMax,this._yMax=t.yMax,this._zMax=0,this._xMid=t.center.x,this._yMid=t.center.y,this._zMid=0,this._width=t.width,this._height=t.height,this._depth=0,this.event.emit(e.AABB_CHANGED,this),this):this},h.setBox=function(t){return t?(this._xMin=t.x,this._yMin=t.y,this._zMin=t.z||0,this._width=t.width,this._height=t.height,this._depth=t.depth||0,this._xMax=this._xMin+this._width,this._yMax=this._yMin+this._height,this._zMax=this._zMin+this._depth,this._xMid=this._xMin+this._width/2,this._yMid=this._yMin+this._height/2,this._zMid=this._zMin+this._depth/2,this.event.emit(e.AABB_CHANGED,this),this):this},h.setAABB=function(t){if(!t)return this;var i=t.min,h=t.max;return this._xMin=i.x,this._yMin=i.y,this._zMin=i.z||0,this._xMax=h.x,this._yMax=h.y,this._zMax=h.z||0,this._width=this._xMax-this._xMin,this._height=this._yMax-this._yMin,this._depth=this._zMax-this._zMin,this._xMid=this._xMin+this._width/2,this._yMid=this._yMin+this._height/2,this._zMid=this._zMin+this.depth/2,this.event.emit(e.AABB_CHANGED,this),this},h.intersect=function(t){return!!(this.group&t.mask&&t.group&this.mask)&&!(this.xMin>t.xMax||this.xMax<t.xMin||this.yMin>t.yMax||this.yMax<t.yMin||this.zMin>t.zMax||this.zMax<t.zMin)},i(t,[{key:"xMin",get:function(){return this._xMin}},{key:"yMin",get:function(){return this._yMin}},{key:"zMin",get:function(){return this._zMin}},{key:"xMid",get:function(){return this._xMid}},{key:"yMid",get:function(){return this._yMid}},{key:"zMid",get:function(){return this._zMid}},{key:"xMax",get:function(){return this._xMax}},{key:"yMax",get:function(){return this._yMax}},{key:"zMax",get:function(){return this._zMax}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"depth",get:function(){return this._depth}}]),t}());h._RF.pop()}}}));

System.register("chunks:///_virtual/Body2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,h,n;return{setters:[function(t){i=t.createClass},function(t){h=t.cclegacy,n=t.EventTarget}],execute:function(){h._RF.push({},"ece01HhmQJE8IqxVqOQsZn5","Body",void 0);var s=function(){function t(){}return t.create=function(){return++this.value>1e10&&(this.value=1),this.value},t}();s.value=0;var e=t("BodyEvent",function(t){return t[t.AABB_CHANGED=0]="AABB_CHANGED",t}({}));t("Body",function(){function t(t){this._xMin=0,this._yMin=0,this._zMin=0,this._xMid=0,this._yMid=0,this._zMid=0,this._xMax=0,this._yMax=0,this._zMax=0,this._width=0,this._height=0,this._depth=0,this.id=0,this.group=1,this.mask=1,this.data=void 0,this.event=new n,this.id="number"==typeof t?t:s.create()}t.emit=function(t,i,h,n,s,e,_){t.event.emit(i,h,n,s,e,_)},t.on=function(t,i,h,n){t.event.on(i,h,n)},t.once=function(t,i,h,n){t.event.once(i,h,n)},t.off=function(t,i,h,n){t.event.off(i,h,n)},t.targetOff=function(t,i){t.event.targetOff(i)};var h=t.prototype;return h.setID=function(t){return this.id=t,this},h.setGroup=function(t){return this.group=t,this},h.setMask=function(t){return this.mask=t,this},h.setData=function(t){return this.data=t,this},h.setRect=function(t){return t?(this._xMin=t.xMin,this._yMin=t.yMin,this._zMin=0,this._xMax=t.xMax,this._yMax=t.yMax,this._zMax=0,this._xMid=t.center.x,this._yMid=t.center.y,this._zMid=0,this._width=t.width,this._height=t.height,this._depth=0,this.event.emit(e.AABB_CHANGED,this),this):this},h.setBox=function(t){return t?(this._xMin=t.x,this._yMin=t.y,this._zMin=t.z||0,this._width=t.width,this._height=t.height,this._depth=t.depth||0,this._xMax=this._xMin+this._width,this._yMax=this._yMin+this._height,this._zMax=this._zMin+this._depth,this._xMid=this._xMin+this._width/2,this._yMid=this._yMin+this._height/2,this._zMid=this._zMin+this._depth/2,this.event.emit(e.AABB_CHANGED,this),this):this},h.setAABB=function(t){if(!t)return this;var i=t.min,h=t.max;return this._xMin=i.x,this._yMin=i.y,this._zMin=i.z||0,this._xMax=h.x,this._yMax=h.y,this._zMax=h.z||0,this._width=this._xMax-this._xMin,this._height=this._yMax-this._yMin,this._depth=this._zMax-this._zMin,this._xMid=this._xMin+this._width/2,this._yMid=this._yMin+this._height/2,this._zMid=this._zMin+this.depth/2,this.event.emit(e.AABB_CHANGED,this),this},h.intersect=function(t){return!!(this.group&t.mask&&t.group&this.mask)&&!(this.xMin>t.xMax||this.xMax<t.xMin||this.yMin>t.yMax||this.yMax<t.yMin||this.zMin>t.zMax||this.zMax<t.zMin)},i(t,[{key:"xMin",get:function(){return this._xMin}},{key:"yMin",get:function(){return this._yMin}},{key:"zMin",get:function(){return this._zMin}},{key:"xMid",get:function(){return this._xMid}},{key:"yMid",get:function(){return this._yMid}},{key:"zMid",get:function(){return this._zMid}},{key:"xMax",get:function(){return this._xMax}},{key:"yMax",get:function(){return this._yMax}},{key:"zMax",get:function(){return this._zMax}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"depth",get:function(){return this._depth}}]),t}());h._RF.pop()}}}));

System.register("chunks:///_virtual/cc-ecs.ts",["cc","./index4.ts","./EcsManager.ts","./EcsTimer.ts","./EcsTween.ts","./ecs.ts","./EcsComponent.ts","./EcsEntity.ts","./EcsSingleton.ts","./EcsSystem.ts","./MoveComponent.ts","./NodeComponent.ts","./MoveSystem.ts"],(function(e){var n;return{setters:[function(e){n=e.cclegacy},null,function(n){e("ecsclass",n.ecsclass)},function(n){var t={};t.Timer=n.Timer,t.timer=n.timer,e(t)},function(n){var t={};t.Tween=n.Tween,t.tween=n.tween,e(t)},function(n){var t={};t.ECS=n.ECS,t.ecs=n.ecs,t.filter=n.filter,t.getClassByName=n.getClassByName,e(t)},function(n){e("EcsComponent",n.EcsComponent)},function(n){e("EcsEntity",n.EcsEntity)},function(n){e("EcsSingleton",n.EcsSingleton)},function(n){e("EcsSystem",n.EcsSystem)},function(n){var t={};t.MoveComponent=n.MoveComponent,t.MoveTowardType=n.MoveTowardType,e(t)},function(n){e("NodeComponent",n.NodeComponent)},function(n){e("MoveSystem",n.MoveSystem)}],execute:function(){n._RF.push({},"7c33fDg+XpEsKnlHlqRjyAA","cc-ecs",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/cc-expand.ts",["cc","./index.ts"],(function(){var c;return{setters:[function(e){c=e.cclegacy},null],execute:function(){c._RF.push({},"7e38dGVLjJJFKjqcggOa/EB","cc-expand",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/cc-quadtree.ts",["cc","./index3.ts","./Body.ts","./QuadTree.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},null,function(t){e("Body",t.Body)},function(t){e("QuadTree",t.QuadTree)}],execute:function(){t._RF.push({},"6bae9Sa55dJHIRi1CqPRg+9","cc-quadtree",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/cc-sap.ts",["cc","./index2.ts","./Body2.ts","./SAP.ts"],(function(t){var c;return{setters:[function(t){c=t.cclegacy},null,function(c){t("Body",c.Body)},function(c){var n={};n.SAP=c.SAP,n.SortType=c.SortType,t(n)}],execute:function(){c._RF.push({},"f886dynP0hE+Ljxcksg4Wk8","cc-sap",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/Core.ts",["./rollupPluginModLoBabelHelpers.js","cc","./debug.ts","./logger.ts","./storage.ts","./task.ts"],(function(t){var n,e,s,i,o,E,r,a;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,s=t.EventTarget,i=t.js},function(t){o=t},function(t){E=t.default},function(t){r=t.default},function(t){a=t.default}],execute:function(){e._RF.push({},"b4a49Ny+p5ESLkbKbyXAdn/","Core",void 0);var u=function(t){return t.EVENT_APPINIT_FINISHED="EVENT_APPINIT_FINISHED",t.EVENT_SYS_MANAGER_INITED="EVENT_SYS_MANAGER_INITED",t.EVENT_USER_MANAGER_INITED="EVENT_USER_MANAGER_INITED",t.EVENT_MANAGER_INITED="EVENT_MANAGER_INITED",t.EVENT_MANAGER_FINISHED="EVENT_MANAGER_FINISHED",t}(u||{}),c={},l={task:a,storage:r,debug:o,logger:E},f={},N={},_={},I={},g={},A=new s,T=t("default",function(){function t(){this.lib=l,this.config=null,this.data=null,this.store=null,this.Manager=null,this.manager=null,this.config=f,this.data=N,this.store=_,this.Manager=I,this.manager=g,this.constructor===t||i.getClassById("App")||i.setClassAlias(this.constructor,"App")}var e=t.prototype;return e.on=function(t,n,e){c[t]&&n.call(e),A.on(t,n,e)},e.once=function(t,n,e){c[t]?n.call(e):A.once(t,n,e)},e.off=function(t,n,e){A.off(t,n,e)},e.targetOff=function(t){A.targetOff(t)},t.emit=function(t){c[t]=!0;for(var n=arguments.length,e=new Array(n>1?n-1:0),s=1;s<n;s++)e[s-1]=arguments[s];A.emit.apply(A,[t].concat(e))},n(t,null,[{key:"inst",get:function(){return this._inst||(this._inst=new t),this._inst}}]),t}());T.EventType=u,T._inst=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/debug.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){e("unobservable",(function(e,n){if(!e)return;!function(){try{t=e,r="unobservable",u=function(){n?n():function(e){if(e)for(var n=0,t=Object.keys(e);n<t.length;n++)delete e[t[n]]}(e)}.bind(null,"debugger"),Object.defineProperty(t,r,{get:u,set:c,enumerable:!1,configurable:!1})}catch(e){}var t,r,u,c}()})),n._RF.push({},"c0d5do7I/BADoW7bHVLnAjr","debug",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/ecs.ts",["cc","./EcsComponent.ts","./EcsSystem.ts","./EcsCache.ts","./EcsFilter.ts","./EcsManager.ts","./EcsObject.ts"],(function(e){var t,n,a,s,i,r,o,c,u,f,m,y,h;return{setters:[function(e){t=e.cclegacy,n=e.Node},function(e){a=e.EcsComponent},function(e){s=e.EcsSystem},function(e){i=e.entityCache},function(e){r=e.Filter},function(e){o=e.classManager,c=e.EntityManager,u=e.SystemManager,f=e.ComponentManager},function(e){m=e.EcsBase,y=e.EcsBaseEntity,h=e.EcsBaseSystem}],execute:function(){e("getClassByName",(function(e){return o.getClassByName(e)})),t._RF.push({},"60d3duxRLxOZZzx9nWEcwX8","ecs",void 0);e("filter",{all:function(){var e;return(e=new r).all.apply(e,arguments)},any:function(){var e;return(e=new r).any.apply(e,arguments)},only:function(){var e;return(e=new r).only.apply(e,arguments)},exclude:function(){var e;return(e=new r).exclude.apply(e,arguments)}});var g=e("ECS",function(){function e(){this.entityManager=new c,this.systemManager=new u,this.componentManager=new f,this.singletons=[]}e.create=function(){return new e};var t=e.prototype;return t.query=function(e,t){var n=r.query(this.entityManager,this.componentManager,e);return t?n.map((function(e){return e.get(t)})):n},t.find=function(e,t){var n=r.find(this.entityManager,this.componentManager,e);return n?t?n.get(t):n:null},t.exist=function(e){return!!r.find(this.entityManager,this.componentManager,e)},t.findByUuid=function(e){return this.entityManager.get(e)},t.existByUuid=function(e){return!!this.entityManager.has(e)},t.addSingleton=function(e){var t=this.singletons.find((function(t){return t.ecsName===e.ecsName}));if(t)return t;if(e instanceof m)return this.singletons.push(e),e;var n=new e;return this.singletons.push(n),n},t.getSingleton=function(e){return this.singletons.find((function(t){return t.ecsName===e.ecsName}))},t.removeSingleton=function(e){var t=this.singletons.findIndex((function(t){return t.ecsName===e.ecsName}));return t>=0?this.singletons.splice(t,1)[0]:null},t.createEntity=function(e,t){var a=i.get()||new e;return y.init(a,this,n.isNode(t)?t:null==t?void 0:t.node),this.entityManager.add(a),a},t.removeEntity=function(e){this.entityManager.remove(e),e.allowRecycling&&(y.updateUUID(e),i.put(e))},t.addComponent=function(e,t){y.addComponent(e,t),this.componentManager.addComponent(t.ecsName,t),this.systemManager.each((function(t){s.matchEntity(t,e)}))},t.removeComponent=function(e){var t=e.entity,n=e.ecsName;a.beforeRemove(e),this.systemManager.each((function(e){s.matchEntity(e,t)})),y.removeComponent(t,e),this.componentManager.removeComponent(n,e)},t.addSystem=function(e){var t=new e(this);this.systemManager.add(t),h.onAdd(t)},t.removeSystem=function(e){var t=this.systemManager.remove(e);t&&h.onRemove(t)},t.clear=function(){this.systemManager.clear(),this.entityManager.clear(),this.componentManager.clear(),this.singletons.length=0},t.executeSystem=function(e,t){this.systemManager.each((function(n){h.execute(n,e,t)}))},t.beforeExecuteSystem=function(e,t){this.systemManager.each((function(n){h.beforeExecute(n,e,t)}))},t.afterExecuteSystem=function(e,t){this.systemManager.each((function(n){h.afterExecute(n,e,t)}))},t.updateSystem=function(e,t){this.systemManager.each((function(n){h.update(n,e,t)}))},t.beforeUpdateSystem=function(e,t){this.systemManager.each((function(n){h.beforeUpdate(n,e,t)}))},t.afterUpdateSystem=function(e,t){this.systemManager.each((function(n){h.afterUpdate(n,e,t)}))},t.execute=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.beforeExecuteSystem(e,n),this.executeSystem(e,n),this.afterExecuteSystem(e,n)},t.update=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.beforeUpdateSystem(e,n),this.updateSystem(e,n),this.afterUpdateSystem(e,n)},e}());e("ecs",g.create());t._RF.pop()}}}));

System.register("chunks:///_virtual/EcsCache.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"5a761PqUw9EPYF99MK2qbx/","EcsCache",void 0);t("entityCache",new(function(){function t(){this.cache=[]}var c=t.prototype;return c.get=function(){return this.cache.length?this.cache.pop():null},c.put=function(t){this.cache.push(t)},c.clear=function(){this.cache.length=0},t}())),t("componentCache",new(function(){function t(){this.cache=new Map}var c=t.prototype;return c.get=function(t){var c=this.cache.get(t);return c&&c.length?c.pop():null},c.put=function(t,c){var e=this.cache.get(t);e?e.push(c):this.cache.set(t,[c])},c.clear=function(){this.cache.clear()},t}()));c._RF.pop()}}}));

System.register("chunks:///_virtual/EcsComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EcsManager.ts","./EcsObject.ts"],(function(n){var e,t,i,o,s;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass},function(n){i=n.cclegacy},function(n){o=n.ecsclass},function(n){s=n.EcsBaseComponent}],execute:function(){var r;i._RF.push({},"e3cefkWL0VPY6rfRc4YOkDI","EcsComponent",void 0);n("EcsComponent",o("EcsComponent")(r=function(n){function i(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))||this)._initing=!1,e._removing=!1,e._isValid=!1,e._enabled=!1,e._entity=null,e.__enabled=!1,e}e(i,n),i.updateEnable=function(n){n.updateEnable()},i.beforeRemove=function(n){return n.innerBeforeRemove()},i.onAdd=function(n,e){return n.innerAdd(e)},i.onRemove=function(n){return n.innerRemove()};var o=i.prototype;return o.updateEnable=function(){var n=this.enabledInHierarchy;this.__enabled!==n&&(this.__enabled=n,n?this.onEnable():this.onDisable())},o.innerAdd=function(n){this._initing=!0,this._removing=!1,this._isValid=!0,this._enabled=!0,this.__enabled=!1,this._entity=n,this.onAdd(),this._initing=!1,this.__enabled=this.enabledInHierarchy,this.__enabled&&this.onEnable()},o.innerBeforeRemove=function(){this._removing=!0},o.innerRemove=function(){this.__enabled&&this.onDisable(),this.onRemove(),this._removing=!1,this._isValid=!1,this._enabled=!1,this.__enabled=!1,this._entity=null},o.onAdd=function(){},o.onEnable=function(){},o.onDisable=function(){},o.onRemove=function(){},o.destroy=function(){return!!this.entity&&this.entity.remove(this)},o.log=function(){for(var n,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];(n=console).log.apply(n,["["+this.ecsName+"] [log]"].concat(t))},o.warn=function(){for(var n,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];(n=console).warn.apply(n,["["+this.ecsName+"] [warn]"].concat(t))},o.error=function(){for(var n,e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];(n=console).error.apply(n,["["+this.ecsName+"] [error]"].concat(t))},t(i,[{key:"isValid",get:function(){return this._isValid},set:function(n){this._isValid=n}},{key:"isStrictValid",get:function(){return this._isValid&&!this._removing}},{key:"enabled",get:function(){return this._enabled},set:function(n){this._enabled!==n&&(this._enabled=n,this._initing||this._removing||this.updateEnable())}},{key:"entity",get:function(){return this._entity},set:function(n){this._entity=n}},{key:"enabledInHierarchy",get:function(){return!!this._enabled&&(!!this._entity&&!!this._entity.enabled)}}]),i}(s))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/EcsEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EcsCache.ts","./EcsManager.ts","./EcsObject.ts","./EcsUtils.ts","./EcsComponent.ts"],(function(e){var t,n,s,i,o,a,r,c,l,u,h;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){s=e.cclegacy,i=e.error},function(e){o=e.componentCache},function(e){a=e.classManager,r=e.flagManager},function(e){c=e.EcsBaseComponent,l=e.EcsBaseEntity},function(e){u=e.ArrayMap},function(e){h=e.EcsComponent}],execute:function(){s._RF.push({},"3cb56l+Bt9HB7MN6ZEVumVr","EcsEntity",void 0);e("EcsEntity",function(e){function s(){for(var t,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this).flag=new Array(r.bits).fill(0),t.instNames=[],t.instNameToComps=new u,t.superNameToComps=new u,t._isValid=!1,t._enabled=!0,t._ecs=null,t._node=null,t._isDestroyed=!0,t}t(s,e);var l=s.prototype;return l.innerInit=function(e,t){void 0===t&&(t=null),this._ecs=e,this._node=t,this._isValid=!0,this._enabled=!0,this._isDestroyed=!1,this.onAdd(),this._enabled&&this.onEnable()},l.innerAddComponent=function(e){var t=this,n=e.ecsName;a.eachSuperName(n,(function(n){t.superNameToComps.add(n,e)})),1===this.instNameToComps.add(n,e)&&(this.instNames.push(n),r.addFlag(this.flag,r.getAllByName(n))),h.onAdd(e,this)},l.innerRemoveComponent=function(e){var t=this,n=e.ecsName;if(a.eachSuperName(n,(function(n){t.superNameToComps.sub(n,e)})),this.instNameToComps.subDel(n,e)){var s=this.instNames.indexOf(n);this.instNames.splice(s,1),r.getAllByNames(this.instNames,this.flag)}h.onRemove(e)},l.getCompsByName=function(e){var t=this.instNameToComps.get(e);if(t&&t.length)return t;var n=this.superNameToComps.get(e);return n&&n.length?n:null},l.getCompsByName2=function(e){var t=[],n=this.instNameToComps.get(e);n&&n.length&&Array.prototype.push.apply(t,n);var s=this.superNameToComps.get(e);return s&&s.length&&Array.prototype.push.apply(t,s),t},l.clear=function(){for(var e=this.instNames,t=e.length-1;t>=0;t--){var n=this.instNameToComps.get(e[t]);if(n)for(var s=n.length-1;s>=0;s--)this.removeComponent(n[s])}this.flag.fill(0),this.instNames.length=0,this.instNameToComps.clear(),this.superNameToComps.clear()},l.destroy=function(){return!this._isDestroyed&&(this._isDestroyed=!0,this.enabled&&this.onDisable(),this.onRemove(),this.clear(),this._node=null,this._isValid=!1,this._ecs.removeEntity(this),this._ecs=null,!0)},l.onAdd=function(){},l.onEnable=function(){},l.onDisable=function(){},l.onRemove=function(){},l.checkFlagAll=function(e){return r.checkFlagAll(this.flag,e)},l.checkFlagAny=function(e){return r.checkFlagAny(this.flag,e)},l.checkFlagOnly=function(e){for(var t=this.instNames,n=0;n<t.length;n++){var s=t[n],i=r.getAllByName(s);if(!r.checkFlagAny(i,e))return!1}return!0},l.addComponent=function(e){return this.add(e)},l.add=function(e){if(e instanceof c)return e.entity?(i("不可以添加其它实体的组件\nuuid:    "+e.uuid+"\n组件名:   "+e.ecsName),null):e.entity===this?(i("不可重复添加同一个组件实例\nuuid:    "+e.uuid+"\n组件名:   "+e.ecsName),null):(this._ecs.addComponent(this,e),e);if(!e.allowMultiple){var t=this.instNameToComps.get(e.ecsName);if(t&&t.length)return t[0]}var n=o.get(e.ecsName)||new e;return this._ecs.addComponent(this,n),n},l.removeComponent=function(e){return this.remove(e)},l.remove=function(e){if(!e)return!1;if(e instanceof c)return e.entity!==this?(i("移除的组件不属于当前实体\n组件名:   "+e.ecsName),!1):(this._ecs.removeComponent(e),e.allowRecycling&&(c.updateUUID(e),o.put(e.ecsName,e)),!0);var t=this.get(e);return t?(this._ecs.removeComponent(t),e.allowRecycling&&(c.updateUUID(t),o.put(e.ecsName,t)),!0):(i("移除的组件不属于当前实体\n组件名:   "+e.ecsName),!1)},l.removeComponents=function(e){return this.removeAll(e)},l.removeAll=function(e){var t=this,n=this.getAll(e);return!!n.length&&n.every((function(e){return t.remove(e)}))},l.hasComponent=function(e){return this.has(e)},l.has=function(e){var t=this.getCompsByName(e.ecsName);return!(!t||0===t.length)},l.getComponent=function(e){return this.get(e)},l.get=function(e){var t=this.getCompsByName(e.ecsName);return t&&0!==t.length?t[0]:null},l.getComponents=function(e){return this.getAll(e)},l.getAll=function(e){return this.getCompsByName2(e.ecsName)},n(s,[{key:"isValid",get:function(){return this._isValid},set:function(e){this._isValid=e}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e,e?this.onEnable():this.onDisable(),this.instNameToComps.forEach((function(e){for(var t=0;t<e.length;t++)h.updateEnable(e[t])})))}},{key:"ecs",get:function(){return this._ecs}},{key:"node",get:function(){return this._node},set:function(e){this._node=e}}]),s}(l));s._RF.pop()}}}));

System.register("chunks:///_virtual/EcsFilter.ts",["cc","./EcsManager.ts"],(function(n){var e,t;return{setters:[function(n){e=n.cclegacy},function(n){t=n.flagManager}],execute:function(){e._RF.push({},"a540fT/cuhLbqtoVtYuZAwo","EcsFilter",void 0);n("Filter",function(){function n(){this.anyList=[],this.include="",this.hasSearch=!1,this.hasExclude=!1,this.pipeline=[]}n.check=function(n,e){return e.pipeline.every((function(e){return e(n)}))},n.query=function(n,e,t){var r=this,i=[];if(!t)return i;var u,c=function(n){n.enabledInHierarchy&&(i.indexOf(n.entity)>=0||i.push(n.entity))};if(0!==t.anyList.length&&(t.anyList.forEach((function(n){var t;null==(t=e.getComponents(n))||t.forEach(c)})),0===i.length))return i;if(0===i.length&&t.include&&(null==(u=e.getComponents(t.include))||u.forEach(c),0===i.length))return i;return 0===i.length&&!t.hasSearch&&t.hasExclude&&n.each((function(n){n.enabled&&i.push(n)})),0===i.length?i:i.filter((function(n){return r.check(n,t)}))},n.find=function(n,e,t){var r=this;if(!t)return null;if(t.anyList.length){for(var i=0,u=t.anyList.length;i<u;i++){var c,l=t.anyList[i],a=null==(c=e.getComponents(l))?void 0:c.find((function(n){return!!n.enabledInHierarchy&&r.check(n.entity,t)}));if(a)return a.entity}return null}var h,s=[];if(t.include&&(null==(h=e.getComponents(t.include))||h.forEach((function(n){n.enabledInHierarchy&&(s.indexOf(n.entity)>=0||s.push(n.entity))})),0===s.length))return null;return 0===s.length&&!t.hasSearch&&t.hasExclude&&n.each((function(n){n.enabled&&s.push(n)})),0===s.length?null:(s=s.filter((function(n){return r.check(n,t)}))).length>0?s[0]:null};var e=n.prototype;return e.any=function(){var n=this;this.hasSearch=!0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length||t.forEach((function(e){n.anyList.indexOf(e.ecsName)>=0||n.anyList.push(e.ecsName)})),this},e.all=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(this.hasSearch=!0,0===e.length)return this;this.include||(this.include=e[0].ecsName);var i=null;return this.pipeline.push((function(n){return i||(i=t.getByNames(e.map((function(n){return n.ecsName})))),n.checkFlagAll(i)&&e.every((function(e){return n.getAll(e).some((function(n){return n.enabled&&n.isStrictValid}))}))})),this},e.only=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(this.hasSearch=!0,0===e.length)return this;this.include||(this.include=e[0].ecsName);var i=null;return this.pipeline.push((function(n){return i||(i=t.getByNames(e.map((function(n){return n.ecsName})))),n.checkFlagOnly(i)&&e.every((function(e){return n.getAll(e).some((function(n){return n.enabled&&n.isStrictValid}))}))})),this},e.exclude=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(0===e.length)return this;this.hasExclude=!0;var i=null;return this.pipeline.push((function(n){return i||(i=t.getByNames(e.map((function(n){return n.ecsName})))),!n.checkFlagAny(i)||e.every((function(e){return n.getAll(e).every((function(n){return!n.enabled||!n.isStrictValid}))}))})),this},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/EcsManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EcsObject.ts","./EcsUtils.ts"],(function(t){var e,n,r,s,i;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){r=t.EcsBase,s=t.EcsBaseComponent},function(t){i=t.CustomArray}],execute:function(){t("ecsclass",(function(t){return function(e){return e.ecsName=t,o.add(e,t),e}})),n._RF.push({},"809afoW2MZH3puLNNvM4vaw","EcsManager",void 0);t("flagManager",new(function(){function t(){this.index=0,this.cache=new Map,this.cacheAll=new Map}var n=t.prototype;return n.addFlag=function(t,e){for(var n=0;n<e.length;n++)t[n]|=e[n]},n.removeFlag=function(t,e){for(var n=0;n<e.length;n++)t[n]&=~e[n]},n.checkFlagAll=function(t,e){for(var n=0;n<e.length;n++)if((t[n]&e[n])!==e[n])return!1;return!0},n.checkFlagAny=function(t,e){for(var n=0;n<e.length;n++)if(0!=(t[n]&e[n]))return!0;return!1},n.getAllByName=function(t){var e=this.cacheAll.get(t);if(e)return e;var n=[t];o.eachSuperName(t,(function(t){n.push(t)}));var r=this.getByNames(n);return this.cacheAll.set(t,r),r},n.getAllByNames=function(t,e){for(var n=this.getAllByName(t[0]),r=0;r<e.length;r++)e[r]=n[r];for(var s=1;s<t.length;s++){n=this.getAllByName(t[s]);for(var i=0;i<e.length;i++)e[i]=e[i]|n[i]}return e},n.getByName=function(t){var e=this.cache.get(t);if(e)return e;var n=this.bits,r=new Array(n).fill(0);return r[this.index/31>>>0]=1<<this.index%31,this.cache.set(t,r),this.index++,r},n.getByNames=function(t){for(var e=new Array(this.bits),n=this.getByName(t[0]),r=0;r<e.length;r++)e[r]=n[r];for(var s=1;s<t.length;s++){n=this.getByName(t[s]);for(var i=0;i<e.length;i++)e[i]=e[i]|n[i]}return e},e(t,[{key:"bits",get:function(){return Math.ceil(o.comSize/31)}}]),t}()));var o=t("classManager",new(function(){function t(){this.comClassCount=0,this.nameToSuperName=new Map,this.nameToClass=new Map}var n=t.prototype;return n.getSuper=function(t){if(!t||!t.prototype)return null;var e=t.prototype,n=e&&Object.getPrototypeOf(e);return n&&n.constructor},n.add=function(t,e){this.nameToClass.set(e,t);for(var n=this.getSuper(t);n&&n.ecsName!==r.ecsName;)this.nameToSuperName.set(e,n.ecsName),n=this.getSuper(t=n),e=t.ecsName;n===s&&this.comClassCount++},n.eachSuperName=function(t,e){for(;t;){var n=this.getSuperName(t);if(!n)break;e(t=n)}},n.isChildByName=function(t,e){if(!t)return!1;if(!e)return!1;for(;t;){var n=this.getSuperName(t);if(n===e)return!0;t=n}return!1},n.getClassByName=function(t){return this.nameToClass.get(t)},n.getSuperName=function(t){return this.nameToSuperName.get(t)||""},e(t,[{key:"comSize",get:function(){return this.comClassCount}}]),t}()));t("ComponentManager",function(){function t(){this.components=new Map}var e=t.prototype;return e.getOrCreateComps=function(t){return this.components.has(t)||this.components.set(t,new i),this.components.get(t)},e.addComponent=function(t,e){t&&(this.getOrCreateComps(t).add(e),this.addComponent(o.getSuperName(t),e))},e.removeComponent=function(t,e){t&&this.components.has(t)&&(this.getOrCreateComps(t).remove(e),this.removeComponent(o.getSuperName(t),e))},e.getComponents=function(t){return this.components.get(t)||null},e.clear=function(){this.components.forEach((function(t){return t.clear()})),this.components.clear()},t}()),t("EntityManager",function(){function t(){this.entities=new Map}var e=t.prototype;return e.has=function(t){return this.entities.get(t)||null},e.add=function(t){this.entities.set(t.uuid,t)},e.remove=function(t){return this.entities.delete(t.uuid)},e.get=function(t){return this.entities.get(t)||null},e.getAll=function(t){return this.entities.forEach((function(e){return t.push(e)})),t},e.each=function(t){this.entities.forEach(t)},e.clear=function(){this.entities.clear()},t}()),t("SystemManager",function(){function t(){this.systems=[]}var n=t.prototype;return n.add=function(t){this.systems.push(t)},n.get=function(t){var e=this.systems.findIndex((function(e){return e.ecsName===t.ecsName}));return this.systems[e]},n.remove=function(t){var e=this.systems.findIndex((function(e){return e.ecsName===t.ecsName}));return e>=0&&this.systems.splice(e,1)[0]||null},n.clear=function(){this.systems.length=0},n.each=function(t){this.systems.forEach(t)},e(t,[{key:"size",get:function(){return this.systems.length}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/EcsObject.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EcsUtils.ts"],(function(e){var n,t,c,u;return{setters:[function(e){n=e.createClass,t=e.inheritsLoose},function(e){c=e.cclegacy},function(e){u=e.UuidMaker}],execute:function(){c._RF.push({},"b4f0dmGxrdIDI3BwChrAdEU","EcsObject",void 0);var r=e("entityUuidMaker",new u),o=e("componentUuidMaker",new u),i=e("systemUuidMaker",new u),a=e("singletonUuidMaker",new u),l=e("EcsBase",function(){function e(){}return n(e,[{key:"ecsName",get:function(){return this.constructor.ecsName}}]),e}());l.ecsName="EcsBase",e("EcsBaseEntity",function(e){function c(){for(var n,t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return(n=e.call.apply(e,[this].concat(c))||this)._uuid=r.create(),n}return t(c,e),c.updateUUID=function(e){e._uuid=r.create()},c.init=function(e,n,t){return void 0===t&&(t=null),e.innerInit(n,t)},c.addComponent=function(e,n){return e.innerAddComponent(n)},c.removeComponent=function(e,n){return e.innerRemoveComponent(n)},n(c,[{key:"uuid",get:function(){return this._uuid}},{key:"allowRecycling",get:function(){return this.constructor.allowRecycling}}]),c}(l)).allowRecycling=!1;var s=e("EcsBaseComponent",function(e){function c(){for(var n,t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return(n=e.call.apply(e,[this].concat(c))||this)._uuid=o.create(),n}return t(c,e),c.updateUUID=function(e){e._uuid=o.create()},n(c,[{key:"uuid",get:function(){return this._uuid}},{key:"allowRecycling",get:function(){return this.constructor.allowRecycling}},{key:"allowMultiple",get:function(){return this.constructor.allowMultiple}}]),c}(l));s.allowRecycling=!1,s.allowMultiple=!1;e("EcsBaseSystem",function(e){function c(){for(var n,t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return(n=e.call.apply(e,[this].concat(c))||this)._uuid=i.create(),n}return t(c,e),c.onAdd=function(e){e.onAdd()},c.onRemove=function(e){e.onRemove()},c.execute=function(e,n,t){e.execute.apply(e,[n].concat(t))},c.beforeExecute=function(e,n,t){e.beforeExecute.apply(e,[n].concat(t))},c.afterExecute=function(e,n,t){e.afterExecute.apply(e,[n].concat(t))},c.update=function(e,n,t){e.update.apply(e,[n].concat(t))},c.beforeUpdate=function(e,n,t){e.beforeUpdate.apply(e,[n].concat(t))},c.afterUpdate=function(e,n,t){e.afterUpdate.apply(e,[n].concat(t))},n(c,[{key:"uuid",get:function(){return this._uuid}}]),c}(l)),e("EcsBaseSingleton",function(e){function c(){for(var n,t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return(n=e.call.apply(e,[this].concat(c))||this)._uuid=a.create(),n}return t(c,e),n(c,[{key:"uuid",get:function(){return this._uuid}}]),c}(l));c._RF.pop()}}}));

System.register("chunks:///_virtual/EcsSingleton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EcsManager.ts","./EcsObject.ts"],(function(n){var t,e,s,c;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){s=n.ecsclass},function(n){c=n.EcsBaseSingleton}],execute:function(){var i;e._RF.push({},"b51e6z/Y0BOSoTqKfN5Xu1w","EcsSingleton",void 0);n("EcsSingleton",s("EcsSingleton")(i=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(c))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/EcsSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EcsFilter.ts","./EcsObject.ts","./EcsTimer.ts","./EcsTween.ts"],(function(t){var e,n,i,r,c,s,a;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy},function(t){r=t.Filter},function(t){c=t.EcsBaseSystem},function(t){s=t.TimerManager},function(t){a=t.TweenManager}],execute:function(){i._RF.push({},"0937dDhN9lAi5QPfkZ3n5DH","EcsSystem",void 0);t("EcsSystem",function(t){function i(e){var n;return(n=t.call(this)||this)._ecs=null,n.timer=new s,n.tween=new a,n.matcher=null,n.matchEntities=new Map,n.ecs=e,n}e(i,t),i.matchEntity=function(t,e){t.matchEntity(e)};var c=i.prototype;return c.onAdd=function(){},c.onRemove=function(){},c.query=function(t,e){return this.matcher===t?e?Array.from(this.matchEntities.values()).map((function(t){return t.getComponent(e)})):Array.from(this.matchEntities.values()):this.ecs.query(t,e)},c.find=function(t,e){var n;return this.matcher===t?e?(null==(n=this.matchEntities.values().next().value)?void 0:n.getComponent(e))||null:this.matchEntities.values().next().value||null:this.ecs.find(t,e)},c.exist=function(t){return this.matcher===t?this.matchEntities.size>0:this.ecs.exist(t)},c.createEntity=function(t,e){return this.ecs.createEntity(t,e)},c.findByUuid=function(t){return this.ecs.findByUuid(t)},c.existByUuid=function(t){return this.ecs.existByUuid(t)},c.getSingleton=function(t){return this.ecs.getSingleton(t)},c.onEntityEnter=function(t){},c.onEntityLeave=function(t){},c.matchEntity=function(t){var e=this;if(this.matcher){var n=this.matchEntities.has(t.uuid);r.check(t,this.matcher)?n||(this.matchEntities.set(t.uuid,t),this.onEntityEnter(t)):n&&(this.matchEntities.delete(t.uuid),this.onEntityLeave(t))}else this.matchEntities.size>0&&(this.matchEntities.forEach((function(t){e.onEntityLeave(t)})),this.matchEntities.clear())},c.execute=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]},c.beforeExecute=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]},c.afterExecute=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]},c.update=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]},c.beforeUpdate=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]},c.afterUpdate=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]},c.log=function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).log.apply(t,["["+this.ecsName+"] [log]"].concat(n))},c.warn=function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).warn.apply(t,["["+this.ecsName+"] [warn]"].concat(n))},c.error=function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).error.apply(t,["["+this.ecsName+"] [error]"].concat(n))},n(i,[{key:"ecs",get:function(){return this._ecs},set:function(t){this._ecs=t}}]),i}(c));i._RF.pop()}}}));

System.register("chunks:///_virtual/EcsTimer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy}],execute:function(){t("timer",(function(t,e){void 0===e&&(e=null);return new a(t,e)})),i._RF.push({},"43fe9vHWB5I5o1FslhK5cvX","EcsTimer",void 0);var n=0,a=t("Timer",function(){function t(t,e){void 0===e&&(e=null),this._id=++n,this.first=!0,this.time=0,this.callback=null,this._target=null,this._delay=0,this._interval=0,this._repeat=-1,this._target=e,this.callback=t}t.step=function(t,e){if(t.time+=e,t.first){if(t.time<t._delay)return!0;t.first=!1,t.time=0}else{if(t.time<t._interval)return!0;t.time=0}return t.callback.call(t.target),!(t._repeat>=0&&--t._repeat<0)};var i=t.prototype;return i.delay=function(t){return this._delay=Math.max(0,t),this},i.interval=function(t){return this._interval=Math.max(0,t),this},i.repeat=function(t){return this._repeat=t,this},e(t,[{key:"id",get:function(){return this._id}},{key:"target",get:function(){return this._target}}]),t}());t("TimerManager",function(){function t(){this.map=new Map,this.pausing=new Map}var i=t.prototype;return i.add=function(t){return this.map.set(t.id,t),t.id},i.remove=function(t){var e=this;"number"==typeof t?(this.map.delete(t),this.pausing.delete(t)):t instanceof a?(this.map.delete(t.id),this.pausing.delete(t.id)):this.map.forEach((function(i,n){i.target===t&&(e.map.delete(n),e.pausing.delete(n))}))},i.pause=function(t){var e=this;"number"==typeof t?this.pausing.set(t,!0):t instanceof a?this.pausing.set(t.id,!0):this.map.forEach((function(i,n){i.target===t&&e.pausing.set(n,!0)}))},i.resume=function(t){var e=this;"number"==typeof t?this.pausing.delete(t):t instanceof a?this.pausing.delete(t.id):this.map.forEach((function(i,n){i.target===t&&e.pausing.delete(n)}))},i.step=function(t){var e=this;this.map.forEach((function(i,n){e.pausing.has(n)||!1===a.step(i,t)&&e.map.delete(n)}))},i.clear=function(){this.map.clear(),this.pausing.clear()},e(t,[{key:"size",get:function(){return this.map.size}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/EcsTween.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,a,i;return{setters:[function(t){e=t.createClass,n=t.inheritsLoose},function(t){a=t.cclegacy,i=t.math}],execute:function(){t("tween",(function(t){return new f(t)})),a._RF.push({},"3fccdwfDOVK96Oiu+VCMP1u","EcsTween",void 0);var r=function(t){return t[t.None=0]="None",t[t.To=1]="To",t[t.By=2]="By",t}(r||{}),o=function(){},s=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).type=r.None,e.ratio=0,e.time=0,e.end=null,e.start=null,e.easing=null,e}return n(e,t),e}(o),u=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).control=null,e}return n(e,t),e}(s),l=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).delay=0,e}return n(e,t),e}(o),c=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).callback=null,e}return n(e,t),e}(o),p=0,f=t("Tween",function(){function t(t){this._id=++p,this.actions=[],this._target=null,this._target=t}t.step=function(e,n){var a=e.actions[0];if(a instanceof l)a.delay-=n,a.delay<=0&&e.actions.shift();else if(a instanceof c)a.callback&&(e.actions.shift(),a.callback());else if(a instanceof s)if(e.target.isValid){a.ratio=Math.min(a.ratio+n/a.time,1),a.ratio>=1&&e.actions.shift();var i=a.easing?a.easing(a.ratio):a.ratio;a.start||(a.start=t.getStartValue(a.end,e.target),a.type===r.By&&(a instanceof u?(a.end=t.getEndValue(a.end,e.target),a.control=t.getStartValue(a.control,e.target)):a.end=t.getEndValue(a.end,e.target))),a instanceof u?t.bezier(i,a.start,a.control,a.end,e.target):t.lerp(i,a.start,a.end,e.target)}else e.actions.shift();else e.actions.shift();return e.actions.length>0};var n=t.prototype;return n.delay=function(t){var e=new l;return e.delay=t,this.actions.push(e),this},n.call=function(t){var e=new c;return e.callback=t,this.actions.push(e),this},n.to=function(e,n,a){var i=new s;return i.type=r.To,i.ratio=0,i.time=Math.max(e,0),i.end=t.getCopyValue(n),i.start=null,i.easing=(null==a?void 0:a.easing)||null,this.actions.push(i),this},n.by=function(e,n,a,i){var o=new s;return o.type=r.By,o.ratio=0,o.time=Math.max(e,0),o.end=t.getCopyValue(a),o.start=null,o.easing=(null==i?void 0:i.easing)||null,this.actions.push(o),this},n.bezierTo=function(e,n,a,i,o){var s=new u;return s.type=r.To,s.ratio=0,s.time=Math.max(e,0),s.control=t.getStartValue(a,i),s.end=t.getCopyValue(a),s.start=null,s.easing=(null==o?void 0:o.easing)||null,this.actions.push(s),this},n.bezierBy=function(e,n,a,i,o){var s=new u;s.type=r.By,s.ratio=0,s.time=Math.max(e,0),s.end=t.getCopyValue(a),s.control=t.getCopyValue(i),s.start=null,s.easing=(null==o?void 0:o.easing)||null,this.actions.push(s),this.actions.push(s)},t.getCopyValue=function(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&("number"==typeof t[n]||"boolean"==typeof t[n]?e[n]=t[n]:t[n]&&"object"==typeof t[n]&&(e[n]=this.getCopyValue(t[n])));return e},t.getEndValue=function(t,e){void 0===e&&(e={});var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&("number"==typeof t[a]?n[a]=t[a]+(e[a]||0):"boolean"==typeof t[a]?n[a]=t[a]:t[a]&&"object"==typeof t[a]&&(n[a]=this.getEndValue(t[a],e[a])));return n},t.getStartValue=function(t,e){void 0===e&&(e={});var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&("number"==typeof t[a]?n[a]=e[a]||0:"boolean"==typeof t[a]?n[a]=e[a]||!1:t[a]&&"object"==typeof t[a]&&(n[a]=this.getStartValue(t[a],e[a])));return n},t.lerp=function(t,e,n,a){for(var r in void 0===a&&(a={}),e)Object.prototype.hasOwnProperty.call(e,r)&&("number"==typeof e[r]?a[r]=i.lerp(e[r],n[r],t):"boolean"==typeof e[r]?a[r]=t>=1?n[r]:e[r]:e[r]&&"object"==typeof e[r]&&this.lerp(t,e[r],n[r],a[r]))},t.bezier=function(t,e,n,a,r){for(var o in void 0===r&&(r={}),e)if(Object.prototype.hasOwnProperty.call(e,o))if("number"==typeof e[o]){var s=i.lerp(e[o],n[o],t),u=i.lerp(n[o],a[o],t);r[o]=i.lerp(s,u,t)}else"boolean"==typeof e[o]?r[o]=t>=1?a[o]:e[o]:e[o]&&"object"==typeof e[o]&&this.lerp(t,e[o],a[o],r[o])},e(t,[{key:"id",get:function(){return this._id}},{key:"target",get:function(){return this._target}}]),t}());t("TweenManager",function(){function t(){this.map=new Map,this.pausing=new Map}var n=t.prototype;return n.add=function(t){return this.map.set(t.id,t),t.id},n.remove=function(t){var e=this;"number"==typeof t?(this.map.delete(t),this.pausing.delete(t)):t instanceof f?(this.map.delete(t.id),this.pausing.delete(t.id)):this.map.forEach((function(n,a){n.target===t&&(e.map.delete(a),e.pausing.delete(a))}))},n.pause=function(t){var e=this;"number"==typeof t?this.pausing.set(t,!0):t instanceof f?this.pausing.set(t.id,!0):this.map.forEach((function(n,a){n.target===t&&e.pausing.set(a,!0)}))},n.resume=function(t){var e=this;"number"==typeof t?this.pausing.delete(t):t instanceof f?this.pausing.delete(t.id):this.map.forEach((function(n,a){n.target===t&&e.pausing.delete(a)}))},n.step=function(t){var e=this;this.map.forEach((function(n,a){e.pausing.has(a)||!1===f.step(n,t)&&e.map.delete(a)}))},n.clear=function(){this.map.clear(),this.pausing.clear()},e(t,[{key:"size",get:function(){return this.map.size}}]),t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/EcsUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r;return{setters:[function(t){n=t.createClass,e=t.inheritsLoose},function(t){r=t.cclegacy}],execute:function(){t({createMap:function(t){var n=Object.create(null);if(t){n["."]=!0,n["/"]=!0,delete n["."],delete n["/"]}return n},filterArray:function(t,n){var e=0,r=null,i=t.length;for(;e<i;)r=t[e],n(r)?++e:(t[e]=t[i-1],t[i-1]=r,--i);t.length=i}}),r._RF.push({},"b0014LbeklDBLfDsy1UCyH/","EcsUtils",void 0);var i=function(){function t(t){void 0===t&&(t=null),this.next=null,this.value=null,this.value=t}return t.create=function(n){if(void 0===n&&(n=null),this.cache.length){var e=this.cache.pop();return e.value=n,e}return new t(n)},t.put=function(t){t.value=null,t.next=null,this.cache.push(t)},t}();i.cache=[];var u=t("CustomList",function(){function t(){this.head=i.create(),this.tail=this.head,this.count=0}var e=t.prototype;return e.values=function(t){for(var n=this.head.next;n;)t.push(n.value),n=n.next;return t},e.has=function(t){for(var n=this.head.next;n;){if(n.value===t)return!0;n=n.next}return!1},e.add=function(t){return this.count++,this.tail.next=i.create(t),this.tail=this.tail.next,this.count},e.remove=function(t){for(var n=this.head;n.next;){if(n.next.value===t){this.count--;var e=n.next;return n.next=e.next,null===n.next&&(this.tail=n),i.put(e),!0}n=n.next}return!1},e.forEach=function(t,n){for(var e=this.head.next;e;)t.call(n,e.value),e=e.next},e.clear=function(){for(var t=this.head.next,n=t&&t.next;t;)i.put(t),n=(t=n)&&t.next;this.head.next=null,this.tail=this.head,this.count=0},n(t,[{key:"size",get:function(){return this.count}}]),t}()),s=(t("CustomArray",function(){function t(){this.array=[]}var e=t.prototype;return e.values=function(t){return Array.prototype.push.apply(t,this.array),t},e.get=function(t){return this.array[t]},e.has=function(t){return this.array.indexOf(t)>=0},e.add=function(t){this.array.push(t)},e.remove=function(t){var n=this.array.indexOf(t);return n>=0&&(this.array.splice(n,1),!0)},e.forEach=function(t,n){return this.array.forEach(t,n)},e.find=function(t,n){return this.array.find(t,n)},e.findIndex=function(t,n){return this.array.findIndex(t,n)},e.some=function(t,n){return this.array.some(t,n)},e.every=function(t,n){return this.array.every(t,n)},e.clear=function(){this.array.length=0},n(t,[{key:"size",get:function(){return this.array.length}}]),t}()),t("CustomMap",function(){function t(){this.map=new Map}var e=t.prototype;return e.keys=function(t){return this.map.forEach((function(n,e){return t.push(e)})),t},e.values=function(t){return this.map.forEach((function(n){return t.push(n)})),t},e.forEach=function(t,n){return this.map.forEach(t,n)},e.get=function(t){return this.map.get(t)},e.has=function(t){return this.map.has(t)},e.set=function(t,n){return this.map.set(t,n)},e.delete=function(t){return this.map.delete(t)},e.clear=function(){this.map.clear()},n(t,[{key:"size",get:function(){return this.map.size}}]),t}())),a=(t("NumberMap",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.add=function(t){var n=(this.get(t)||0)+1;return this.set(t,n),n},r.sub=function(t){if(!this.has(t))return 0;var n=this.get(t)-1;return this.set(t,n),n},r.subDel=function(t){return 0===this.sub(t)&&(this.delete(t),!0)},n}(s)),t("ArrayMap",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.add=function(t,n){if(this.has(t)){var e=this.get(t);return e.push(n),e.length}return this.set(t,[n]),1},r.sub=function(t,n){var e=this.get(t);if(!e)return 0;var r=e.indexOf(n);return r>=0&&e.splice(r,1),e.length},r.subDel=function(t,n){return 0===this.sub(t,n)&&(this.delete(t),!0)},n}(s)));t("SetMap",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.add=function(t,n){return this.has(t)?this.get(t).add(n).size:this.set(t,(new Set).add(n)).size},r.sub=function(t,n){if(!this.has(t))return 0;var e=this.get(t);return e.delete(n),e.size},r.subDel=function(t,n){return 0===this.sub(t,n)&&(this.delete(t),!0)},n}(s)),t("UArrayMap",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.add=function(t,n){if(this.has(t)){var e=this.get(t);return-1===e.indexOf(n)&&e.push(n),e.length}return this.set(t,[n]),1},n}(a)),t("UListMap",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.add=function(t,n){if(this.has(t)){var e=this.get(t);return e.has(n)||e.add(n),e.size}var r=new u;return this.set(t,r),r.add(n),1},r.sub=function(t,n){if(!this.has(t))return 0;var e=this.get(t);return e.remove(n),e.size},r.subDel=function(t,n){return 0===this.sub(t,n)&&(this.delete(t),!0)},n}(s));t("UuidMaker",function(){function t(){this.uuid=0}var n=t.prototype;return n.create=function(){return++this.uuid},n.clear=function(){this.uuid=0},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseManager.ts"],(function(e){var t,n,r,a,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,a=e.EventTarget},function(e){s=e.default}],execute:function(){var c;n._RF.push({},"b4ea6NEN3hCPZiqp3hRVbvU","EventManager",void 0);var i=r.ccclass;e("default",i("EventManager")(c=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).events=new Map,t}t(n,e);var r=n.prototype;return r.clear=function(){return this.events.clear()},r.delete=function(e){return this.events.delete(e)},r.get=function(e){if(this.events.has(e))return this.events.get(e);var t=new a;return this.events.set(e,t),t},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/handle.ts",["cc"],(function(c){var n;return{setters:[function(c){n=c.cclegacy}],execute:function(){c({appInited:function(c){},appReady:function(c){},cccInited:function(c){},cccReady:function(c){}}),n._RF.push({},"8afafha+81CE6rLLpM3km/u","handle",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./nodeExpand.ts"],(function(){var e;return{setters:[function(n){e=n.cclegacy},null],execute:function(){e._RF.push({},"1e621k8mjtHBopDjHVYm6Ak","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc","./Body2.ts","./SAP.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},function(e){t("Body",e.Body)},function(e){var n={};n.SAP=e.SAP,n.SortType=e.SortType,t(n)}],execute:function(){e._RF.push({},"9319dH6ArRCGY13g57WpPVQ","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index3.ts",["cc","./Body.ts","./QuadTree.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){e("Body",t.Body)},function(t){e("QuadTree",t.QuadTree)}],execute:function(){t._RF.push({},"b6cbbBNT0xEpKFYkdIegxf2","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index4.ts",["cc","./ecs.ts","./EcsComponent.ts","./EcsEntity.ts","./EcsSingleton.ts","./EcsSystem.ts","./EcsManager.ts","./EcsTimer.ts","./EcsTween.ts","./MoveComponent.ts","./NodeComponent.ts","./MoveSystem.ts"],(function(e){var n;return{setters:[function(e){n=e.cclegacy},function(n){var t={};t.ECS=n.ECS,t.ecs=n.ecs,t.filter=n.filter,t.getClassByName=n.getClassByName,e(t)},function(n){e("EcsComponent",n.EcsComponent)},function(n){e("EcsEntity",n.EcsEntity)},function(n){e("EcsSingleton",n.EcsSingleton)},function(n){e("EcsSystem",n.EcsSystem)},function(n){e("ecsclass",n.ecsclass)},function(n){var t={};t.Timer=n.Timer,t.timer=n.timer,e(t)},function(n){var t={};t.Tween=n.Tween,t.tween=n.tween,e(t)},function(n){var t={};t.MoveComponent=n.MoveComponent,t.MoveTowardType=n.MoveTowardType,e(t)},function(n){e("NodeComponent",n.NodeComponent)},function(n){e("MoveSystem",n.MoveSystem)}],execute:function(){n._RF.push({},"df297xhOKRD2IVSzem4gE8/","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/LoaderManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseManager.ts"],(function(e){var n,o,t,r,l,a,u,s,i,d,c,p;return{setters:[function(e){n=e.inheritsLoose,o=e.extends},function(e){t=e.cclegacy,r=e._decorator,l=e.SceneAsset,a=e.assetManager,u=e.Asset,s=e.Font,i=e.isValid,d=e.sp,c=e.SpriteFrame},function(e){p=e.default}],execute:function(){var f;t._RF.push({},"b3bf5M3DHNHcYe1nnNZYr6B","LoaderManager",void 0);var h=r.ccclass;e("default",h("LoaderManager")(f=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var r=t.prototype;return r.handle=function(e,n){var o=this,t=n.bundle,r=n.version,l=n.path,a=n.type,u=n.onProgress,s=n.onComplete;if(!e)return this.error("handle is empty"),s&&s(null);if(!l)return this.error(e+" fail. path is empty"),s&&s(null);t||(t="resources");var i=[l];a&&i.push(a),u&&i.push(u),i.push((function(n,t){n?(o.error(e+' "'+l+'" fail',n),s&&s(null)):s&&s(t)})),this.loadBundle({bundle:t,version:r,onComplete:function(n){if(!n)return s&&s(null);n[e](i[0],i[1],i[2],i[3])}})},r.preload=function(e){l===e.type?this.handle("preloadScene",{path:e.path,bundle:e.bundle,version:e.version,onProgress:e.onProgress,onComplete:e.onComplete}):this.handle("preload",e)},r.preloadDir=function(e){this.handle("preloadDir",e)},r.load=function(e){l===e.type?this.handle("loadScene",{path:e.path,bundle:e.bundle,version:e.version,onProgress:e.onProgress,onComplete:e.onComplete}):this.handle("load",e)},r.loadAsync=function(e){var n=this;return new Promise((function(t){n.load(o({},e,{onComplete:t}))}))},r.loadDir=function(e){this.handle("loadDir",e)},r.loadDirAsync=function(e){var n=this;return new Promise((function(t){n.loadDir(o({},e,{onComplete:t}))}))},r.release=function(e){var n,o=e.path,t=e.bundle,r=e.type;t||(t="resources"),null==(n=a.getBundle(t))||n.release(o,r)},r.releaseAll=function(e){e||(e="resources");var n=a.getBundle(e);n&&n.getDirWithPath("/",u).forEach((function(e){n.release(e.path,e.ctor)}))},r.releaseUnused=function(e){var n;e||(e="resources"),null==(n=a.getBundle(e))||n.releaseUnusedAssets()},r.loadBundle=function(e){var n=e.bundle,o=e.version,t=e.onComplete;n||(n="resources"),o?a.loadBundle(n,{version:o},(function(e,n){t&&t(e?null:n)})):a.loadBundle(n,(function(e,n){t&&t(e?null:n)}))},r.loadBundleAsync=function(e){var n=this;return new Promise((function(t){n.loadBundle(o({},e,{onComplete:t}))}))},r.getBundle=function(e){return e||(e="resources"),a.getBundle(e)},r.removeBundle=function(e){e||(e="resources");var n=a.getBundle(e);n&&a.removeBundle(n)},r.loadRemote=function(e){var n=this,o=e.url,t=e.ext,r=e.onComplete;t?a.loadRemote(o,{ext:t},(function(e,t){if(e)return n.error("loadRemote "+o+" fail"),r&&r(null);r&&r(t)})):a.loadRemote(o,(function(e,t){if(e)return n.error("loadRemote "+o+" fail"),r&&r(null);r&&r(t)}))},r.loadRemoteAsync=function(e){var n=this;return new Promise((function(t){n.loadRemote(o({},e,{onComplete:t}))}))},r.setFont=function(e){this.load({path:e.path,bundle:e.bundle,type:s,onComplete:function(n){if(!n||!i(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));e.target.font=n,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}})},r.setSpine=function(e){this.load({path:e.path,bundle:e.bundle,type:d.SkeletonData,onComplete:function(n){if(!n||!i(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));e.target.skeletonData=n,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}})},r.setSprite=function(e){this.load({path:e.path,bundle:e.bundle,type:c,onComplete:function(n){if(!n||!i(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));e.target.spriteFrame=n,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}})},t}(p))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/logger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var r,n;return{setters:[function(o){r=o.createClass},function(o){n=o.cclegacy}],execute:function(){n._RF.push({},"0b581Lotn1LqYPYEsoeRs/Q","logger",void 0);o("default",new(function(){function o(){}return r(o,[{key:"log",get:function(){return window.console.log.bind(window.console,"%c %s %c %s ","background:#6495ed; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #6495ed; color: #000; font-weight: normal;","[LOG] "+(new Date).toLocaleString(),"background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #6495ed; color: #6495ed; font-weight: normal;")}},{key:"warn",get:function(){return window.console.warn.bind(window.console,"%c %s %c %s ","background:#ff7f50; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff7f50; color: #000; font-weight: normal;","[WARN] "+(new Date).toLocaleString(),"background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff7f50; color: #ff7f50; font-weight: normal;")}},{key:"error",get:function(){return window.console.error.bind(window.console,"%c %s %c %s ","background:#ff4757; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff4757; color: #000; font-weight: normal;","[ERROR] "+(new Date).toLocaleString(),"background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff4757; color: #ff4757; font-weight: normal;")}},{key:"debug",get:function(){return window.console.log.bind(window.console,"%c %s %c %s ","background:#ff6347; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff6347; color: #000; font-weight: normal;","[DEBUG] "+(new Date).toLocaleString(),"background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff6347; color: #ff6347; font-weight: normal;")}},{key:"success",get:function(){return window.console.log.bind(window.console,"%c %s %c %s ","background:#00ae9d; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #00ae9d; color: #000; font-weight: normal;","[SUCC] "+(new Date).toLocaleString(),"background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #00ae9d; color: #00ae9d; font-weight: normal;")}}]),o}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AppInit.ts","./app.ts","./handle.ts","./setting.ts","./cc-ecs.ts","./cc-expand.ts","./cc-quadtree.ts","./cc-sap.ts","./Core.ts","./BaseAppInit.ts","./BaseControl.ts","./BaseController.ts","./BaseManager.ts","./BaseModel.ts","./BaseView.ts","./debug.ts","./logger.ts","./storage.ts","./task.ts","./EventManager.ts","./LoaderManager.ts","./Audio.ts","./AudioEngine.ts","./AudioManager.ts","./SoundManager.ts","./TimerManager.ts","./UIManager.ts","./UIMgrLoading.ts","./UIMgrShade.ts","./UIMgrToast.ts","./UIMgrToastCell.ts","./UIMgrZOrder.ts","./MoveComponent.ts","./NodeComponent.ts","./MoveSystem.ts","./ecs.ts","./EcsComponent.ts","./EcsEntity.ts","./EcsSingleton.ts","./EcsSystem.ts","./EcsCache.ts","./EcsFilter.ts","./EcsManager.ts","./EcsObject.ts","./EcsTimer.ts","./EcsTween.ts","./EcsUtils.ts","./index4.ts","./nodeExpand.ts","./index.ts","./Body.ts","./QuadTree.ts","./index3.ts","./Body2.ts","./SAP.ts","./index2.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MoveComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EcsComponent.ts","./EcsManager.ts"],(function(t){var e,n,i,o,s,r,a;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,o=t.math,s=t.Vec2},function(t){r=t.EcsComponent},function(t){a=t.ecsclass}],execute:function(){var g,p;i._RF.push({},"df103BjnshE0rj0KmBx9wC6","MoveComponent",void 0);var u=t("MoveTowardType",function(t){return t[t.Right=0]="Right",t[t.RightUp=45]="RightUp",t[t.Up=90]="Up",t[t.LeftUp=135]="LeftUp",t[t.Left=180]="Left",t[t.LeftDown=-135]="LeftDown",t[t.Down=-90]="Down",t[t.RightDown=-45]="RightDown",t}({}));t("MoveComponent",a("EcsMoveComponent")(((p=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._options={rotate:!1,minSpeed:-1/0,maxSpeed:1/0,acceleratedVelocity:0,angleVelocity:0},e._distance=0,e._targetUUID=null,e._target=null,e._toward=null,e._angle=0,e._speed=0,e}e(i,t);var r=i.prototype;return r.onRemove=function(){this.reset()},r.reset=function(){this._target=null,this._toward=null,this._targetUUID=null,this._angle=null,this._speed=0,this._distance=0,this._options.rotate=!1,this._options.minSpeed=-1/0,this._options.maxSpeed=1/0,this._options.acceleratedVelocity=0,this._options.angleVelocity=0},i.getTowardAngle=function(t,e){return t&&e?o.toDegree(Math.atan2(e.y-t.y,e.x-t.x)):0},i.getAngleFromNeg180to180=function(t){return(t>=360||t<=-360)&&(t%=360),t>180?t-=360:t<=-180&&(t+=360),t},i.getAngleFrom0To360=function(t){return(t>=360||t<=-360)&&(t%=360),t<0&&(t+=360),t},i.getAngleFromNeg360To0=function(t){return(t>=360||t<=-360)&&(t%=360),t>0&&(t-=360),t},i.getTowardByVelocity=function(t){return 0===t.y?t.x>=0?u.Right:u.Left:0===t.x?t.y>=0?u.Up:u.Down:t.x===t.y?t.x>=0?u.RightDown:u.LeftDown:t.x===-t.y?t.x>=0?u.RightUp:u.LeftUp:s.UNIT_X.signAngle(t)},n(i,[{key:"options",get:function(){return this._options},set:function(t){this._options=t}},{key:"distance",get:function(){return this._distance},set:function(t){this._distance=t}},{key:"target",get:function(){return this._target&&this._target.uuid!==this._targetUUID&&(this._target=null),this._target},set:function(t){this._target=t&&t.isValid?t:null,this._target?this._targetUUID=this._target.uuid:this._targetUUID=null}},{key:"toward",get:function(){return this._toward},set:function(t){this._toward=i.getAngleFromNeg180to180(t)}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=i.getAngleFromNeg180to180(t)}},{key:"speed",get:function(){return this._speed<this.options.minSpeed?this._speed=this.options.minSpeed:this._speed>this.options.maxSpeed&&(this._speed=this.options.maxSpeed),this._speed},set:function(t){t<this.options.minSpeed?t=this.options.minSpeed:t>this.options.maxSpeed&&(t=this.options.maxSpeed),this._speed=t}}]),i}(r)).allowRecycling=!0,g=p))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/MoveSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ecs.ts","./EcsSystem.ts","./MoveComponent.ts","./NodeComponent.ts"],(function(e){var t,n,o,i,s,a,r,p;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e.math},function(e){i=e.filter},function(e){s=e.EcsSystem},function(e){a=e.MoveComponent,r=e.MoveTowardType},function(e){p=e.NodeComponent}],execute:function(){n._RF.push({},"3c790GlfiVLkp+rhUX+vBMf","MoveSystem",void 0);e("MoveSystem",function(e){function n(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))||this).filter=i.all(a,p),t}t(n,e);var s=n.prototype;return s.execute=function(e){var t=this;this.query(this.filter,a).forEach((function(n){t.handle(n,n.entity,e)}))},s.handle=function(e,t,n){e.target&&(e.toward=a.getTowardAngle(t.getComponent(p),e.target)),this.rotate(e,t,n);var o=e.speed;e.speed+=e.options.acceleratedVelocity*n,e.speed<e.options.minSpeed&&(e.speed=e.options.minSpeed),e.speed>e.options.maxSpeed&&(e.speed=e.options.maxSpeed);var i=(o+e.speed)/2;this.run(e,t,n,i)},s.run=function(e,t,n,i){var s=i*n;if(e.angle===r.Right)t.getComponent(p).addPosition(s,0);else if(e.angle===r.Left)t.getComponent(p).addPosition(-s,0);else if(e.angle===r.Up)t.getComponent(p).addPosition(0,s);else if(e.angle===r.Down)t.getComponent(p).addPosition(0,-s);else{var a=o.toRadian(e.angle),l=Math.cos(a)*s,c=Math.sin(a)*s;t.getComponent(p).addPosition(l,c)}e.distance+=s},s.rotate=function(e,t,n){var o,i,s=0;if(e.toward!==e.angle){var r=a.getAngleFromNeg180to180(e.toward-e.angle);s=0===e.options.angleVelocity?r:(o=r,(i=e.options.angleVelocity*n)<0&&(i=-i),o>0?o>i?i:o:o<0&&o<-i?-i:o),e.angle+=s,e.options.rotate&&t.getComponent(p).setAngle(e.angle)}return s},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/NodeComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EcsComponent.ts","./EcsManager.ts"],(function(t){var n,i,o,e,s,h,u,r,c,l,a,g,d;return{setters:[function(t){n=t.inheritsLoose,i=t.createClass},function(t){o=t.cclegacy,e=t.Mat4,s=t.v3,h=t.v2,u=t.size,r=t.Quat,c=t.Rect,l=t.UITransform,a=t.Vec3},function(t){g=t.EcsComponent},function(t){d=t.ecsclass}],execute:function(){var y,f;o._RF.push({},"6b13fl2A6dO0Yl2w10qi7o4","NodeComponent",void 0);var $=new e;t("NodeComponent",d("EcsNodeComponent")(((f=function(t){function o(){for(var n,i=arguments.length,o=new Array(i),e=0;e<i;e++)o[e]=arguments[e];return(n=t.call.apply(t,[this].concat(o))||this).isBoundingBoxDirty=!0,n.$position=s(),n.$scale=s(1,1,1),n.$anchorPoint=h(.5,.5),n.$contentSize=u(),n.$lrot=new r,n.$euler=s(),n._boundingBox=new c,n._boundingBoxOut=new c,n}n(o,t);var g=o.prototype;return g.onRemove=function(){this.reset()},g.reset=function(){this.$position.set(0,0,0),this.$scale.set(1,1,1),this.$anchorPoint.set(.5,.5),this.$contentSize.set(0,0),this.$lrot=new r,this.$euler.set(0,0,0)},g._updateBoundingBox=function(){this.isBoundingBoxDirty&&(this.isBoundingBoxDirty=!0,this._boundingBox.set(-this.anchorPoint.x*this.width,-this.anchorPoint.y*this.height,this.width,this.height),e.fromSRT?e.fromSRT($,this.rotation,this.position,this.scale):e.fromRTS($,this.rotation,this.position,this.scale),this._boundingBox.transformMat4($))},g.setPosition=function(t,n,i){return void 0===i&&(i=this.z),this.x=t,this.y=n,this.z=i,this},g.addPosition=function(t,n,i){return void 0===i&&(i=0),this.x+=t,this.y+=n,this.z+=i,this},g.setScale=function(t,n,i){return void 0===i&&(i=this.scaleZ),this.scaleX=t,this.scaleY=n,this.scaleZ=i,this},g.addScale=function(t,n,i){return void 0===i&&(i=0),this.scaleX+=t,this.scaleY+=n,this.scaleZ+=i,this},g.setAngle=function(t){return this.angle=t,this},g.addAngle=function(t){return this.angle+=t,this},g.setContentSize=function(t,n){return this.width=t,this.height=n,this},g.setAnchorPoints=function(t,n){return this.anchorX=t,this.anchorY=n,this},i(o,[{key:"position",get:function(){return this.$position}},{key:"x",get:function(){return this.$position.x},set:function(t){var n;this.$position.x=t,this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||n.setPosition(this.$position)}},{key:"y",get:function(){return this.$position.y},set:function(t){var n;this.$position.y=t,this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||n.setPosition(this.$position)}},{key:"z",get:function(){return this.$position.z},set:function(t){var n;this.$position.z=t,this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||n.setPosition(this.$position)}},{key:"scale",get:function(){return this.$scale}},{key:"scaleX",get:function(){return this.$scale.x},set:function(t){var n;this.$scale.x=t,this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||n.setScale(this.$scale)}},{key:"scaleY",get:function(){return this.$scale.y},set:function(t){var n;this.$scale.y=t,this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||n.setScale(this.$scale)}},{key:"scaleZ",get:function(){return this.$scale.z},set:function(t){var n;this.$scale.z=t,this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||n.setScale(this.$scale)}},{key:"anchorPoint",get:function(){return this.$anchorPoint}},{key:"anchorX",get:function(){return this.$anchorPoint.x},set:function(t){var n;this.$anchorPoint.x=t,this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||null==(n=n.getComponent(l))||n.setAnchorPoint(this.$anchorPoint)}},{key:"anchorY",get:function(){return this.$anchorPoint.y},set:function(t){var n;this.$anchorPoint.y=t,this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||null==(n=n.getComponent(l))||n.setAnchorPoint(this.$anchorPoint)}},{key:"contentSize",get:function(){return this.$contentSize}},{key:"width",get:function(){return this.$contentSize.width},set:function(t){var n;this.$contentSize.width=t,this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||null==(n=n.getComponent(l))||n.setContentSize(this.$contentSize)}},{key:"height",get:function(){return this.$contentSize.height},set:function(t){var n;this.$contentSize.height=t,this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||null==(n=n.getComponent(l))||n.setContentSize(this.$contentSize)}},{key:"rotation",get:function(){return this.$lrot},set:function(t){var n;r.copy(this.$lrot,t),r.toEuler(this.$euler,this.$lrot),this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||n.setRotation(this.$lrot)}},{key:"eulerAngles",get:function(){return this.$euler},set:function(t){var n;a.copy(this.$euler,t),r.fromEuler(this.$lrot,t.x,t.y,t.z),this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||n.setRotation(this.$lrot)}},{key:"angle",get:function(){return this.$euler.z},set:function(t){var n;this.$euler.z=t,r.fromAngleZ(this.$lrot,t),this.isBoundingBoxDirty=!0,null==(n=this.entity)||null==(n=n.node)||n.setRotation(this.$lrot)}},{key:"boundingBox",get:function(){return this._updateBoundingBox(),this._boundingBoxOut.set(this._boundingBox)}},{key:"minX",get:function(){return this._updateBoundingBox(),this._boundingBox.xMin}},{key:"minY",get:function(){return this._updateBoundingBox(),this._boundingBox.yMin}},{key:"maxX",get:function(){return this._updateBoundingBox(),this._boundingBox.xMax}},{key:"maxY",get:function(){return this._updateBoundingBox(),this._boundingBox.yMax}}]),o}(g)).allowRecycling=!0,y=f))||y);o._RF.pop()}}}));

System.register("chunks:///_virtual/nodeExpand.ts",["cc"],(function(){var e,t;return{setters:[function(s){e=s.cclegacy,t=s.Node}],execute:function(){e._RF.push({},"23ee3eyRSRG9bgFkMDqpK3Y","nodeExpand",void 0),Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.set(e,this.position.y,this.position.z),this.setPosition(this.position)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.set(this.position.x,e,this.position.z),this.setPosition(this.position)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.position.z},set:function(e){this.position.set(this.position.x,this.position.y,e),this.setPosition(this.position)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleX",{get:function(){return this.scale.x},set:function(e){this.scale.set(e,this.scale.y,this.scale.z),this.setScale(this.scale)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleY",{get:function(){return this.scale.y},set:function(e){this.scale.set(this.scale.x,e,this.scale.z),this.setScale(this.scale)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleZ",{get:function(){return this.scale.z},set:function(e){this.scale.set(this.scale.x,this.scale.y,e),this.setScale(this.scale)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angleX",{get:function(){return this.eulerAngles.x},set:function(e){this.eulerAngles.set(e,this.eulerAngles.y,this.eulerAngles.z),this.setRotationFromEuler(this.eulerAngles)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angleY",{get:function(){return this.eulerAngles.y},set:function(e){this.eulerAngles.set(this.eulerAngles.x,e,this.eulerAngles.z),this.setRotationFromEuler(this.eulerAngles)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angleZ",{get:function(){return this.eulerAngles.z},set:function(e){this.eulerAngles.set(this.eulerAngles.x,this.eulerAngles.y,e),this.setRotationFromEuler(this.eulerAngles)},enumerable:!0,configurable:!0}),e._RF.pop()}}}));

System.register("chunks:///_virtual/QuadTree.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Body.ts"],(function(e){var t,i,n,r;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy},function(e){n=e.Body,r=e.BodyEvent}],execute:function(){i._RF.push({},"6950cD/fZRJFo2OIfyV0l5y","QuadTree",void 0);var s=[1,2,4,8],h=function(e){function i(){return e.call(this)||this}t(i,e),i.createWithRect=function(e){var t=new i;return t.setRect(e),t},i.createWithAABB=function(e){var t=new i;return t.setAABB(e),t},i.createWithBox=function(e){var t=new i;return t.setBox(e),t};var n=i.prototype;return n.contain=function(e){return this.xMin<=e.xMin&&this.xMax>=e.xMax&&this.yMin<=e.yMin&&this.yMax>=e.yMax},n.split=function(){var e=this.xMid,t=this.yMid,n=this.xMin,r=this.yMin,s=this.xMax,h=this.yMax;return[i.createWithAABB({min:{x:e,y:t},max:{x:s,y:h}}),i.createWithAABB({min:{x:n,y:t},max:{x:e,y:h}}),i.createWithAABB({min:{x:n,y:r},max:{x:e,y:t}}),i.createWithAABB({min:{x:e,y:r},max:{x:s,y:t}})]},i}(n),a=function(){function e(e){this.value=null,this.last=null,this.next=null,this.value=e}var t=e.prototype;return t.concat=function(e){this.next=e,e&&(e.last=this)},t.disConcat=function(){this.last.concat(this.next),this.last=this.next=null},e}(),u=function(){function e(){this.head=new a(null)}var t=e.prototype;return t.push=function(e){e.concat(this.head.next),this.head.concat(e)},t.clear=function(){this.head.next=null},e}(),d=function(){function e(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=null),this.maxLevel=4,this.level=0,this.quadBody=null,this.quadList=new u,this.children=[],this.parent=null,this.level=i,this.quadBody=e,this.parent=n,this.maxLevel=t}var t=e.prototype;return t.split=function(){var t=this;if(!this.children.length){var i=this.level+1,n=this.maxLevel;this.quadBody.split().forEach((function(r){t.children.push(new e(r,n,i,t))}))}},t.getQuadFlags=function(e){var t=0,i=e.xMin<this.quadBody.xMid,n=e.yMax>this.quadBody.yMid,r=e.xMax>this.quadBody.xMid,h=e.yMin<this.quadBody.yMid;return n&&r&&(t|=s[0]),n&&i&&(t|=s[1]),i&&h&&(t|=s[2]),r&&h&&(t|=s[3]),t},t.insert=function(e){if(this.level===this.maxLevel)return this.quadList.push(e),this;var t=this.getQuadFlags(e.value),i=s.indexOf(t);return-1===i?(this.quadList.push(e),this):(0===this.children.length&&this.split(),this.children[i].insert(e))},t.insertReverse=function(e){return this.quadBody.contain(e.value)?this.insert(e):this.parent?this.parent.insertReverse(e):this.insert(e)},t.retrieveSelf=function(e,t,i){if(void 0===i&&(i=!1),i)for(var n=this.quadList.head.next,r=null;n;n=n.next)t!==(r=n.value)&&t.intersect(r)&&e.push(r);else for(var s=this.quadList.head.next,h=null;s&&0===e.length;s=s.next)t!==(h=s.value)&&t.intersect(h)&&e.push(h)},t.retrieve=function(e,t,i){if(void 0===i&&(i=!1),this.retrieveSelf(e,t,i),!1===i&&e.length>0)return e;if(this.level===this.maxLevel||0===this.children.length)return e;for(var n=this.getQuadFlags(t),r=0;r<s.length&&!(s[r]&n&&(this.children[r].retrieve(e,t),!1===i&&e.length>0));r++);return e},t.retrieveParent=function(e,t,i){return void 0===i&&(i=!1),this.parent&&(this.parent.retrieveParent(e,t,i),!1===i&&e.length>0)||this.retrieveSelf(e,t,i),e},t.retrieveReverse=function(e,t,i){return void 0===i&&(i=!1),this.parent&&(this.parent.retrieveParent(e,t,i),!1===i&&e.length>0)?e:this.retrieve(e,t,i)},t.clear=function(){for(var e=this.children.length-1;e>=0;e--)this.children[e].clear();this.quadList.clear(),this.children.length=0},e}();e("QuadTree",function(){var e=t.prototype;function t(e,t,i,n,r){void 0===r&&(r=4),this.quadTree=null,this.nodeCache=[],this.bid2Node=new Map,this.bid2Tree=new Map;var s=h.createWithBox({x:e,y:t,width:i,height:n});this.quadTree=new d(s,r)}return e.createNode=function(e){if(this.nodeCache.length){var t=this.nodeCache.pop();return t.value=e,t}return new a(e)},e.recycleNode=function(e){e.value=null,this.nodeCache.push(e)},e.insert=function(e){var t=this.createNode(e),i=this.quadTree.insert(t);return this.bid2Node.set(e.id,t),this.bid2Tree.set(e.id,i),n.on(e,r.AABB_CHANGED,this.refresh,this),e.id},e.disConcat=function(e){var t=this.bid2Node.get(e);return t?(t.disConcat(),t):null},e.remove=function(e){var t="number"==typeof e?e:e.id,i=this.disConcat(t);return!!i&&(this.bid2Node.delete(t),this.bid2Tree.delete(t),this.recycleNode(i),n.off(i.value,r.AABB_CHANGED,this.refresh,this),!0)},e.refresh=function(e){var t=this.disConcat(e.id);if(!t)return!1;var i=this.bid2Tree.get(e.id),n=i.insertReverse(t);return i!==n&&this.bid2Tree.set(e.id,n),!0},e.retrieve=function(e,t){if(void 0===t&&(t=[]),"number"==typeof e){var i=this.bid2Node.get(e);return i?this.bid2Tree.get(e).retrieveReverse(t,i.value,!0):t}return this.quadTree.retrieve(t,e,!0)},e.check=function(e){if("number"==typeof e){var t=this.bid2Node.get(e);return!!t&&this.bid2Tree.get(e).retrieveReverse([],t.value,!1).length>0}return this.quadTree.retrieve([],e,!1).length>0},e.trigger=function(e){var t=this,i=[],n=new Map;this.bid2Node.forEach((function(r,s){i.length=0;var h=r.value;t.bid2Tree.get(s).retrieveReverse(i,h,!0),i.forEach((function(t){if(h.id<t.id){if(n.get(h.id)===t.id)return;n.set(h.id,t.id)}else if(h.id>t.id){if(n.get(t.id)===h.id)return;n.set(t.id,h.id)}e(h,t)}))}))},e.clear=function(){this.quadTree.clear(),this.bid2Node.clear(),this.bid2Tree.clear(),this.nodeCache.length=0},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/SAP.ts",["cc","./Body2.ts"],(function(i){var r,t,e;return{setters:[function(i){r=i.cclegacy},function(i){t=i.Body,e=i.BodyEvent}],execute:function(){r._RF.push({},"8f8036A1BxGs4B2BmAaqCT9","SAP",void 0);var n=function(i){return i[i.Null=0]="Null",i[i.X=1]="X",i[i.Y=2]="Y",i[i.Z=3]="Z",i}(n||{}),s=i("SortType",function(i){return i[i.Auto=0]="Auto",i[i.XAxis=1]="XAxis",i[i.YAxis=2]="YAxis",i[i.ZAxis=3]="ZAxis",i}({}));i("SAP",function(){function i(i){void 0===i&&(i=s.Auto),this.sort=s.Auto,this.axis=n.Null,this.varianceX=0,this.varianceY=0,this.varianceZ=0,this.dirty=!1,this.bodies=[],this.sort=i,i==s.XAxis?(this.axis=n.X,this.varianceX=1):i==s.YAxis?(this.axis=n.Y,this.varianceY=1):i==s.ZAxis&&(this.axis=n.Z,this.varianceZ=1)}i.sortXAxis=function(i,r){return i.xMin-r.xMin},i.sortYAxis=function(i,r){return i.yMin-r.yMin},i.sortZAxis=function(i,r){return i.zMin-r.zMin},i.trigger=function(i,r,t){var e=0,s=0,a=0,o=n.Null,f=[];i.forEach((function(i){i.build(),e+=i.varianceX,s+=i.varianceY,a+=i.varianceZ,Array.prototype.push.apply(f,i.bodies)})),s>=e&&s>=a?(o=n.Y,f.sort(this.sortYAxis)):e>=s&&e>=a?(o=n.X,f.sort(this.sortXAxis)):(o=n.Z,f.sort(this.sortZAxis));var h=f.length;if(o===n.Y)for(var u=0;u<h;u++)for(var d=f[u],v=u+1;v<h;v++){var x=f[v];if(x.yMin>d.yMax)break;d.intersect(x)&&r.call(t,d,x)}else if(o===n.X)for(var c=0;c<h;c++)for(var M=f[c],b=c+1;b<h;b++){var l=f[b];if(l.xMin>M.xMax)break;M.intersect(l)&&r.call(t,M,l)}else for(var y=0;y<h;y++)for(var A=f[y],z=y+1;z<h;z++){var p=f[z];if(p.zMin>A.zMax)break;A.intersect(p)&&r.call(t,A,p)}};var r=i.prototype;return r.insert=function(i){return this.bodies.push(i),t.on(i,e.AABB_CHANGED,this.refresh,this),this.dirty=!0,i.id},r.remove=function(i){var r="number"==typeof i?i:i.id,n=this.bodies.findIndex((function(i){return i.id===r}));if(-1===n)return!1;var s=this.bodies.splice(n,1);return t.off(s[0],e.AABB_CHANGED,this.refresh,this),this.dirty=!0,!0},r.refresh=function(){this.dirty=!0},r.preBuild=function(){if(!this.dirty)return!1;if(this.dirty=!1,this.sort===s.Auto){var i=0,r=0,t=0,e=0,a=0,o=0,f=this.bodies;f.forEach((function(n){i+=n.xMid,r+=n.yMid,t+=n.zMid,e+=n.xMid*n.xMid,a+=n.yMid*n.yMid,o+=n.zMid*n.zMid}));var h=1/f.length,u=i*h,d=r*h,v=t*h,x=this.varianceX=e*h-u*u,c=this.varianceY=a*h-d*d,M=this.varianceZ=o*h-v*v;this.axis=c>=x&&c>=M?n.Y:x>=c&&x>=M?n.X:n.Z}return!0},r.build=function(){return this.preBuild()&&this.bodies.sort(this.axis===n.Y?i.sortYAxis:this.axis===n.X?i.sortXAxis:i.sortZAxis),this.axis},r.findBodyIndex=function(i){if(this.bodies.length<=1)return 0;if(this.axis===n.Y){if(i.yMin<=this.bodies[0].yMin)return 0;if(this.bodies.length>5){for(var r=this.bodies,t=0,e=r.length-1;t<=e;){var s=Math.floor((t+e)/2),a=r[s];if(i.yMin>=a.yMin&&i.yMin<=a.yMax)return s;i.yMin>=a.yMin?t=s+1:e=s-1}return 0}return this.bodies.findIndex((function(r){return i.yMin>=r.yMin}))}if(this.axis===n.X){if(i.xMin<=this.bodies[0].xMin)return 0;if(this.bodies.length>5){for(var o=this.bodies,f=0,h=o.length-1;f<=h;){var u=Math.floor((f+h)/2),d=o[u];if(i.xMin>=d.xMin&&i.xMin<=d.xMax)return u;i.xMin>=d.xMin?f=u+1:h=u-1}return 0}return this.bodies.findIndex((function(r){return i.xMin>=r.xMin}))}if(i.zMin<=this.bodies[0].zMin)return 0;if(this.bodies.length>5){for(var v=this.bodies,x=0,c=v.length-1;x<=c;){var M=Math.floor((x+c)/2),b=v[M];if(i.zMin>=b.zMin&&i.zMin<=b.zMax)return M;i.zMin>=b.zMin?x=M+1:c=M-1}return 0}return this.bodies.findIndex((function(r){return i.zMin>=r.zMin}))},r.check_=function(i,r,t,e){var s=e?0:1;if(i===n.Y){for(var a=r+s;a<this.bodies.length;a++){var o=this.bodies[a];if(o.yMin>t.yMax)break;if(t.intersect(o))return!0}for(var f=r-1;f>=0;f--){var h=this.bodies[f];if(h.yMax<t.yMin)break;if(t.intersect(h))return!0}}else if(i===n.X){for(var u=r+s;u<this.bodies.length;u++){var d=this.bodies[u];if(d.xMin>t.xMax)break;if(t.intersect(d))return!0}for(var v=r-1;v>=0;v--){var x=this.bodies[v];if(x.xMax<t.xMin)break;if(t.intersect(x))return!0}}else{for(var c=r+s;c<this.bodies.length;c++){var M=this.bodies[c];if(M.zMin>t.zMax)break;if(t.intersect(M))return!0}for(var b=r-1;b>=0;b--){var l=this.bodies[b];if(l.zMax<t.zMin)break;if(t.intersect(l))return!0}}return!1},r.check=function(i){var r=this.build();if("number"==typeof i){var t=this.bodies.findIndex((function(r){return r.id===i}));return-1!==t&&this.check_(r,t,this.bodies[t],!1)}var e=this.findBodyIndex(i);return this.check_(r,e,i,!0)},r.retrieve_=function(i,r,t,e,s){var a=s?0:1;if(r===n.Y){for(var o=t+a;o<this.bodies.length;o++){var f=this.bodies[o];if(f.yMin>e.yMax)break;e.intersect(f)&&i.push(f)}for(var h=t-1;h>=0;h--){var u=this.bodies[h];if(u.yMax<e.yMin)break;e.intersect(u)&&i.push(u)}}else if(r===n.X){for(var d=t+a;d<this.bodies.length;d++){var v=this.bodies[d];if(v.xMin>e.xMax)break;e.intersect(v)&&i.push(v)}for(var x=t-1;x>=0;x--){var c=this.bodies[x];if(c.xMax<e.xMin)break;e.intersect(c)&&i.push(c)}}else{for(var M=t+a;M<this.bodies.length;M++){var b=this.bodies[M];if(b.zMin>e.zMax)break;e.intersect(b)&&i.push(b)}for(var l=t-1;l>=0;l--){var y=this.bodies[l];if(y.zMax<e.zMin)break;e.intersect(y)&&i.push(y)}}return i},r.retrieve=function(i,r){void 0===r&&(r=[]);var t=this.build();if("number"==typeof i){var e=this.bodies.findIndex((function(r){return r.id===i}));return-1===e?r:this.retrieve_(r,t,e,this.bodies[e],!1)}var n=this.findBodyIndex(i);return this.retrieve_(r,t,n,i,!0)},r.trigger=function(i,r){var t=this.build(),e=this.bodies,s=e.length;if(t===n.Y)for(var a=0;a<s;a++)for(var o=e[a],f=a+1;f<s;f++){var h=e[f];if(h.yMin>o.yMax)break;o.intersect(h)&&i.call(r,o,h)}else if(t===n.X)for(var u=0;u<s;u++)for(var d=e[u],v=u+1;v<s;v++){var x=e[v];if(x.xMin>d.xMax)break;d.intersect(x)&&i.call(r,d,x)}else for(var c=0;c<s;c++)for(var M=e[c],b=c+1;b<s;b++){var l=e[b];if(l.zMin>M.zMax)break;M.intersect(l)&&i.call(r,M,l)}},r.clear=function(){this.dirty=!1,this.bodies.length=0,this.sort=s.Auto,this.axis=n.Null},i}());r._RF.pop()}}}));

System.register("chunks:///_virtual/setting.ts",["cc","./SoundManager.ts","./UIManager.ts"],(function(){var e,t,n;return{setters:[function(t){e=t.cclegacy},function(e){t=e.default},function(e){n=e.default}],execute:function(){e._RF.push({},"9a8d2pAnrJAWIiDp94P7b0z","setting",void 0),n.setting.preload=["PageHome","PaperHomeIndex"],n.setting.defaultUI="PageHome",n.setting.autoFit=!0,n.setting.shade={delay:0,begin:100,end:200,speed:400},t.setting.preload=[],t.setting.defaultMusicName="",t.setting.defaultEffectName="",e._RF.pop()}}}));

System.register("chunks:///_virtual/SoundManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./BaseManager.ts","./AudioEngine.ts"],(function(e){var t,i,u,n,s,c,a,l,f,o,r,h,m,y,p,d;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass,u=e.asyncToGenerator,n=e.extends,s=e.regeneratorRuntime},function(e){c=e.cclegacy,a=e._decorator,l=e.AudioClip,f=e.game,o=e.Game,r=e.isValid,h=e.Button,m=e.sys},function(e){y=e.default},function(e){p=e.default},function(e){d=e.default}],execute:function(){var M,g;c._RF.push({},"58002Ha2adOWbt2LDr8rmBT","SoundManager",void 0);var v=a.ccclass,E=function(e,t){m.localStorage.setItem(e,JSON.stringify(t))},S=function(e){var t=m.localStorage.getItem(e);if(t&&"string"==typeof t)return JSON.parse(t)},C=new Proxy({},{get:function(e,t){return e[t]?e[t]:(e[t]=t,t)}}),V=new Proxy({},{get:function(e,t){return e[t]?e[t]:(e[t]=t,t)}}),K="app-sound";e("default",v("SoundManager")(((g=function(e){function c(){for(var t,i=arguments.length,u=new Array(i),n=0;n<i;n++)u[n]=arguments[n];return(t=e.call.apply(e,[this].concat(u))||this).musicMuteCacheKey="musicMute",t.effectMuteCacheKey="effectMute",t.musicVolumeScaleCacheKey="musicVolumeScale",t.effectVolumeScaleCacheKey="effectVolumeScale",t.defaultMusicName="",t.defaultMusicVolume=1,t.defaultEffectName="",t.defaultEffectVolume=1,t.audioCache={},t.effectInterval={},t.playingMusic={uuid:"",id:-1,name:"",volume:1,playing:!1,paused:!1},t}t(c,e);var a=c.prototype;return a.init=function(t){var i,u=c.setting;if(u.musicMuteCacheKey&&(this.musicMuteCacheKey=u.musicMuteCacheKey),u.effectMuteCacheKey&&(this.musicMuteCacheKey=u.effectMuteCacheKey),u.musicVolumeScaleCacheKey&&(this.musicVolumeScaleCacheKey=u.musicVolumeScaleCacheKey),u.effectVolumeScaleCacheKey&&(this.effectVolumeScaleCacheKey=u.effectVolumeScaleCacheKey),u.defaultMusicName&&(this.defaultMusicName=u.defaultMusicName),"number"==typeof u.defaultMusicVolume&&(this.defaultMusicVolume=u.defaultMusicVolume),u.defaultEffectName&&(this.defaultEffectName=u.defaultEffectName),"number"==typeof u.defaultEffectVolume&&(this.defaultEffectVolume=u.defaultEffectVolume),this.musicMuteCacheKey){var n=!0===S(this.musicMuteCacheKey);d.inst.setMusicMute(n)}else this.warn("musicMuteCacheKey不能为空");if(this.effectMuteCacheKey){var s=!0===S(this.effectMuteCacheKey);d.inst.setAllEffectsMute(s)}else this.warn("effectMuteCacheKey不能为空");if(this.musicVolumeScaleCacheKey){var a=S(this.musicVolumeScaleCacheKey);"number"==typeof a&&d.inst.setMusicVolumeScale(a)}else this.warn("musicVolumeScaleCacheKey不能为空");if(this.effectVolumeScaleCacheKey){var f=S(this.effectVolumeScaleCacheKey);"number"==typeof f&&d.inst.setAllEffectsVolumeScale(f)}else this.warn("effectVolumeScaleCacheKey不能为空");e.prototype.init.call(this,t),null==(i=u.preload)||i.forEach((function(e){y.inst.manager.loader.preload({bundle:K,type:l,path:e})}))},a.onLoad=function(){f.on(o.EVENT_HIDE,(function(){d.inst.pauseAll()})),f.on(o.EVENT_SHOW,(function(){d.inst.resumeAll()}))},a.preload=function(e,t){return e?0!==e.indexOf("effect")&&0!==e.indexOf("music")?(this.error("preload","fail",e),void(t&&setTimeout((function(){r(this)&&t(null)})))):void y.inst.manager.loader.preload({bundle:K,path:e,type:l,onComplete:t}):(this.error("preload","fail"),void(t&&setTimeout((function(){r(this)&&t(null)}))))},a.load=function(e){var t=this,i=(arguments.length<=2?void 0:arguments[2])&&(arguments.length<=1?void 0:arguments[1]),u=(arguments.length<=2?void 0:arguments[2])||(arguments.length<=1?void 0:arguments[1]);if(!e)return this.error("load","fail"),void(u&&setTimeout((function(){r(t)&&u(null)})));if(0!==e.indexOf("effect")&&0!==e.indexOf("music"))return this.error("load","fail",e),void(u&&setTimeout((function(){r(t)&&u(null)})));var n=this.audioCache[e];n?u&&setTimeout((function(){r(t)&&u(n)})):y.inst.manager.loader.load({bundle:K,path:e,type:l,onProgress:i,onComplete:function(i){r(t)&&(i?(t.audioCache[e]=i,u&&u(i)):u&&u(null))}})},a.release=function(e){0===e.indexOf("effect")||0===e.indexOf("music")?(delete this.audioCache[e],y.inst.manager.loader.release({bundle:K,path:e,type:l})):this.error("release "+e+" fail")},a.playDefaultMusic=function(e){this.defaultMusicName?this.playMusic({name:this.defaultMusicName,volume:this.defaultMusicVolume,onPlay:e}):this.warn("defaultMusicName 不存在")},a.playDefaultEffect=function(e){this.defaultEffectName?this.playEffect({name:this.defaultEffectName,volume:this.defaultEffectVolume,onPlay:e}):this.warn("defaultEffectName 不存在")},a.setButtonEffect=function(e,t,i){if(t){var u=i||{},n=u.volume,s=void 0===n?1:n,c=u.interval,a=void 0===c?0:c;e.node.useDefaultEffect=!1,e.node.targetOff(this),e.node.on(h.EventType.CLICK,(function(){this.playEffect({name:t,volume:s,interval:a})}),this)}else e.node.useDefaultEffect=!0,e.node.targetOff(this)},a.playEffect=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=this,i=void 0===e?{name:""}:e,u=i.name,n=i.volume,s=void 0===n?1:n,c=i.loop,a=void 0!==c&&c,l=i.interval,f=void 0===l?0:l,o=i.onEnded,h=i.onPlay,m=i.onError;u?this.isEffectMute||this.effectInterval[u]&&Date.now()<this.effectInterval[u]?m&&m():this.load(u,(function(e){if(r(t))if(t.isEffectMute)m&&m();else if(t.effectInterval[u]&&Date.now()<t.effectInterval[u])m&&m();else{if(!e)return t.error("playEffect "+u+" 不存在或加载失败"),void(m&&m());f>0&&(t.effectInterval[u]=Date.now()+1e3*f),d.inst.playEffect(e,s,a,h,o)}else m&&m()})):m&&m()})),a.playEffectAsync=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(u(s().mark((function e(t){var i=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={name:""}),e.abrupt("return",new Promise((function(e){i.playEffect(n({},t,{onPlay:function(t){e(t)},onError:function(){e(null)}}))})));case 2:case"end":return e.stop()}}),e)})))),a.pauseEffect=function(e){return d.inst.pauseEffect(e)},a.pauseAllEffects=function(){return d.inst.pauseAllEffects()},a.resumeEffect=function(e){return d.inst.resumeEffect(e)},a.resumeAllEffects=function(){return d.inst.resumeAllEffects()},a.stopEffect=function(e){return d.inst.stopEffect(e)},a.stopAllEffects=function(){return d.inst.stopAllEffects()},a.playMusic=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=this,i=void 0===e?{name:""}:e,u=i.name,n=i.volume,s=void 0===n?1:n,c=i.force,a=void 0!==c&&c,l=i.onPlay,f=i.onError;if(u){if(!a&&-1!==this.playingMusic.id&&this.playingMusic.name===u)return d.inst.setMusicVolume(s),void(l&&l());this.stopMusic();var o=this.createUUID();this.playingMusic.uuid=o,this.playingMusic.name=u,this.playingMusic.volume=s,this.playingMusic.playing=!0,this.playingMusic.paused=!1,this.isMusicMute?l&&l():this.load(u,(function(e){if(r(t))if(-1===t.playingMusic.id)if(t.playingMusic.name===u){if(t.playingMusic.uuid==t.playingMusic.uuid)return e?void(t.isMusicMute?l&&l():t.playingMusic.id=d.inst.playMusic(e,s,l)):(t.error("playMusic "+u+" 不存在或加载失败"),void(f&&f()));f&&f()}else f&&f();else f&&f();else f&&f()}))}else f&&f()})),a.playMusicAsync=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=this;return void 0===e&&(e={name:""}),new Promise((function(i){t.playMusic(n({},e,{onPlay:function(){i(!0)},onError:function(){i(!1)}}))}))})),a.replayMusic=function(e){this.playingMusic.playing&&this.playingMusic.name&&this.playMusic({name:this.playingMusic.name,volume:this.playingMusic.volume,force:!0,onPlay:e})},a.pauseMusic=function(){return!!this.playingMusic.playing&&(this.playingMusic.paused=!0,d.inst.pauseMusic())},a.resumeMusic=function(){return!!this.playingMusic.playing&&(this.playingMusic.paused=!1,d.inst.resumeMusic())},a.stopMusic=function(){return this.playingMusic.playing=!1,this.playingMusic.paused=!1,this.playingMusic.volume=1,this.playingMusic.name="",this.playingMusic.uuid="",this.playingMusic.id=-1,d.inst.stopMusic()},a.setMusicMute=function(e,t){void 0===t&&(t=!1),t&&E(this.musicMuteCacheKey,e),d.inst.setMusicMute(e),!e&&this.playingMusic.name&&this.playMusic({name:this.playingMusic.name,volume:this.playingMusic.volume})},a.setEffectMute=function(e,t){void 0===t&&(t=!1),d.inst.setAllEffectsMute(e),t&&E(this.effectMuteCacheKey,e)},a.setMusicVolumeScale=function(e,t){void 0===t&&(t=!1),d.inst.setMusicVolumeScale(e),t&&E(this.musicVolumeScaleCacheKey,e)},a.setEffectVolumeScale=function(e,t){void 0===t&&(t=!1),d.inst.setAllEffectsVolumeScale(e),t&&E(this.effectVolumeScaleCacheKey,e)},i(c,[{key:"isMusicPlaying",get:function(){return this.playingMusic.playing}},{key:"isMusicPaused",get:function(){return this.playingMusic.paused}},{key:"isMusicMute",get:function(){return d.inst.getMusicMute()}},{key:"isEffectMute",get:function(){return d.inst.getAllEffectsMute()}},{key:"musicVolumeScale",get:function(){return d.inst.getMusicVolumeScale()}},{key:"effectVolumeScale",get:function(){return d.inst.getAllEffectsVolumeScale()}}]),c}(p)).setting={},g.MusicName=C,g.EffectName=V,M=g))||M);c._RF.pop()}}}));

System.register("chunks:///_virtual/storage.ts",["cc"],(function(t){var e,r,a,n,i;return{setters:[function(t){e=t.cclegacy,r=t.sys,a=t.log,n=t.error,i=t.js}],execute:function(){e._RF.push({},"be3dafKG7VKQYlL+CdRx47y","storage",void 0);var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o=function(){var t,e,r,a,n,i,c,o=new Date;return o.getFullYear()+""+(e=(t=(t=o)||new Date).getFullYear(),r=t.getMonth()+1,a=t.getDate(),n=new Date(e,r-1,a),i=new Date(e,0,1),c=Math.round((n.valueOf()-i.valueOf())/864e5),Math.ceil((c+(i.getDay()+1-1))/7))},u=function(t){return(t=t||new Date).toLocaleDateString()};t("default",new(function(){function t(){this._cache={},this.secretKey=""}var e=t.prototype;return e.set=function(t,e){if("string"==typeof t&&void 0!==e)try{var i=JSON.stringify(e);return this.secretKey?r.localStorage.setItem(t,function(t,e){e=e||c;for(var r="",a=0;a<t.length;a++){var n=t.charCodeAt(a)^e.charCodeAt(a%e.length);r+=String.fromCharCode(n)}return r}(i,this.secretKey)):r.localStorage.setItem(t,i),this._cache[t]=i,!0}catch(t){a(t)}else n("storage set error");return!1},e.get=function(t){if(void 0!==this._cache[t])return JSON.parse(this._cache[t]);var e=null;try{var a=r.localStorage.getItem(t);a&&"string"==typeof a?(this.secretKey&&(a=function(t,e){e=e||c;for(var r="",a=0;a<t.length;a++){var n=t.charCodeAt(a)^e.charCodeAt(a%e.length);r+=String.fromCharCode(n)}return r}(a,this.secretKey)),this._cache[t]=a,e=JSON.parse(a)):""!==a&&null!==a&&(e=void 0)}catch(t){e=void 0}return e},e.add=function(t,e){void 0===e&&(e=1);var r=this.get(t);return!(void 0===r||(r=r||0,r+=e,!this.set(t,r)))&&r},e.remove=function(t){try{return r.localStorage.removeItem(t),delete this._cache[t],!0}catch(t){return!1}},e.clear=function(){try{return r.localStorage.clear(),i.clear(this._cache),!0}catch(t){return!1}},e.setWeek=function(t,e,r){var a=o();if(!r)return this.set(t,{data:e,updateTime:a});var n=this.getWeek(t);return!(void 0===n||null!==n&&!r(n,e))&&this.set(t,{data:e,updateTime:a})},e.getWeek=function(t){var e=this.get(t);return e&&e.updateTime==o()?e.data:e&&null},e.setDay=function(t,e,r){var a=u();if(!r)return this.set(t,{data:e,updateTime:a});var n=this.getDay(t);return!(void 0===n||null!==n&&!r(n,e))&&this.set(t,{data:e,updateTime:a})},e.getDay=function(t){var e=this.get(t);return e&&e.updateTime==u()?e.data:e&&null},t}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/task.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"721e63MqrNI1qpO4br4ISY7","task",void 0);var s=function(){function t(){this.running=!1,this.index=-1,this.list=[],this.finish=null,this.results=[]}var n=t.prototype;return n.size=function(){return this.list.length},n.add=function(t){return this.list.push(t),this.results.push(void 0),this},n.start=function(t){return this.running||(this.running=!0,this.index=-1,this.finish=t,this.next(this.index)),this},n.stop=function(){return!!this.running&&(this.running=!1,this.finish&&this.finish(this.results,!1),!0)},n.isRunning=function(){return this.running},n.isStop=function(){return!this.running},n.end=function(t){return!!this.running&&(void 0!==t&&(this.results[this.index]=t),this.running=!1,this.finish&&this.finish(this.results,!0),!0)},n.next=function(t,n){return!!this.running&&(t===this.index&&(void 0!==n&&(this.results[this.index]=n),++this.index<this.list.length?this.retry(this.index):this.end(),!0))},n.retry=function(t){var n=this;if(!this.running)return!1;if(t!==this.index)return!1;var i=this.list[t];return i&&i((function(i){return n.next(t,i)}),(function(i){return void 0===i&&(i=0),new Promise((function(s){i>0?setTimeout((function(){s(n.retry(t))}),1e3*i):s(n.retry(t))}))}),(function(t){return n.end(t)})),!0},t}(),r=function(){function t(){this.running=!1,this.count=0,this.list=[],this.finish=null,this.results=[]}var n=t.prototype;return n.size=function(){return this.list.length},n.add=function(t){return this.list.push(t),this.results.push(void 0),this.running&&this.retry(this.list.length-1),this},n.start=function(t){if(this.running)return this;if(this.running=!0,this.count=0,this.finish=t,this.list.length)for(var n=0;n<this.list.length;n++)this.retry(n);else this.end&&this.end(this.count);return this},n.stop=function(){return!!this.running&&(this.running=!1,this.finish&&this.finish(this.results,!1),!0)},n.isRunning=function(){return this.running},n.isStop=function(){return!this.running},n.end=function(t,n){if(!this.running)return!1;if(t>=0&&t<this.results.length){if(this.results[t]||null===this.results[t])return!1;this.results[t]=void 0!==n?n:null}return this.running=!1,this.finish&&this.finish(this.results,!0),!0},n.next=function(t,n){if(!this.running)return!1;if(t>=0&&t<this.results.length){if(this.results[t]||null===this.results[t])return!1;this.results[t]=void 0!==n?n:null}return++this.count===this.list.length&&this.end&&this.end(this.count),!0},n.retry=function(t){var n=this;if(!this.running)return!1;var i=this.list[t];return i&&i((function(i){return n.next(t,i)}),(function(i){return void 0===i&&(i=0),new Promise((function(s){i>0?setTimeout((function(){s(n.retry(t))}),1e3*i):s(n.retry(t))}))}),(function(i){return n.end(t,i)})),!0},t}(),u=function(){function t(){this.task=new s}var i=t.prototype;return i.size=function(){return this.task.size()},i.add=function(t){if(t instanceof Array){var n=new r;t.forEach((function(t){return n.add(t)})),this.task.add(n.start.bind(n))}else this.task.add(t);return this},i.start=function(t){return this.task.start(t),this},i.stop=function(){return this.task.stop()},i.isRunning=function(){return this.task.isRunning()},i.isStop=function(){return this.task.isStop()},n(t,[{key:"results",get:function(){return this.task.results}}]),t}(),e=t("default",{createSync:function(){return new s},createASync:function(){return new r},createAny:function(){return new u},execute:function(t,n,i){void 0===n&&(n=-1),t((function(s){if(void 0===s&&(s=0),0===n)return i&&i();n=n>0?n-1:n,s>0?setTimeout((function(){return e.execute(t,n,i)}),1e3*s):e.execute(t,n,i)}))},excute:function(t,n,i){return void 0===n&&(n=-1),this.execute(t,n,i)}});i._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseManager.ts"],(function(e){var t,i,n,r,s,a;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){n=e.cclegacy,r=e._decorator,s=e.Component},function(e){a=e.default}],execute:function(){var c;n._RF.push({},"b5636+NNRZFEKq6dPkgK4qf","TimerManager",void 0);var u=r.ccclass,o=function(){function e(e,t,i){this._beginHour=0,this._beginMinute=0,this._beginSecond=0,this._endHour=0,this._endMinute=0,this._endSecond=0,this.checkCallback=0,this.callback=null,this.target=null,this.callback=t,this.target=i;var n=e.split("-"),r=n[0],s=n[1],a=r.split(":");if(this._beginHour=Number(a[0])||0,this._beginMinute=Number(a[1]||0)||0,this._beginSecond=Number(a[2]||0)||0,s){var c=s.split(":");this._endHour=Number(c[0])||0,this._endMinute=Number(c[1]||0)||0,this._endSecond=Number(c[2]||0)||0}else this._endHour=this._beginHour,this._endMinute=this._beginMinute,this._endSecond=this._beginSecond}return i(e,[{key:"beginTime",get:function(){var e=new Date;return e.setHours(this._beginHour),e.setMinutes(this._beginMinute),e.setSeconds(this._beginSecond),e.getTime()}},{key:"endTime",get:function(){var e=new Date;return e.setHours(this._endHour),e.setMinutes(this._endMinute),e.setSeconds(this._endSecond),e.getTime()}}]),e}(),h=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).times=[],t}t(i,e);var n=i.prototype;return n.registerDailyTrigger=function(e,t,i){this.times.push(new o(e,t,i))},n.unregisterDailyTrigger=function(e){for(var t=0;t<this.times.length;t++){if(this.times[t].callback===e){this.times.splice(t,1);break}}},n.update=function(){var e=new Date,t=e.getTime(),i=e.getDay();this.times.forEach((function(e){e.checkCallback!==i&&e.beginTime<=t&&e.endTime>=t&&(e.checkCallback=i,e.callback.call(e.target))}))},i}(s);e("default",u("TimerManager")(c=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).timers=new Map,t}t(i,e);var n=i.prototype;return n.clear=function(){this.timers.forEach((function(e){e.destroy()})),this.timers.clear()},n.delete=function(e){var t=this.timers.get(e);t&&(this.timers.delete(e),t.destroy())},n.get=function(e){if(this.timers.has(e))return this.timers.get(e);var t=this.node.addComponent(h);return this.timers.set(e,t),t},i}(a))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./BaseManager.ts","./BaseView.ts","./UIMgrLoading.ts","./UIMgrShade.ts","./UIMgrToast.ts","./UIMgrZOrder.ts"],(function(e){var t,n,i,r,a,o,s,u,h,l,c,d,f,g,p,v,I,w,m,U,y,S,M,E,C,P,L,b,T,R,B,D,N,V,O,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.extends,o=e.createClass},function(e){s=e.cclegacy,u=e._decorator,h=e.Node,l=e.Prefab,c=e.find,d=e.Camera,f=e.director,g=e.instantiate,p=e.settings,v=e.Settings,I=e.size,w=e.screen,m=e.Layers,U=e.UITransform,y=e.Widget,S=e.Scene,M=e.js,E=e.isValid,C=e.SceneAsset,P=e.Canvas,L=e.ResolutionPolicy,b=e.view},function(e){T=e.default},function(e){R=e.default},function(e){B=e.ViewType,D=e.default},function(e){N=e.default},function(e){V=e.default},function(e){O=e.default},function(e){A=e.default}],execute:function(){var k,_,H,F,x,Q,z,W,j,q;s._RF.push({},"234f6Lx69NNFJ9vC2nHCWRJ","UIManager",void 0);var X=u.ccclass,G=u.property,Z="UIRoot",J=[B.Page,B.Paper,B.Pop,B.Top],K=[h.EventType.TOUCH_START,h.EventType.TOUCH_MOVE,h.EventType.TOUCH_END,h.EventType.TOUCH_CANCEL,h.EventType.MOUSE_DOWN,h.EventType.MOUSE_MOVE,h.EventType.MOUSE_UP,h.EventType.MOUSE_ENTER,h.EventType.MOUSE_LEAVE,h.EventType.MOUSE_WHEEL],Y=function(e){return e[e.LoadError=0]="LoadError",e[e.LogicError=1]="LogicError",e[e.InvalidError=2]="InvalidError",e}(Y||{}),$=new Proxy({},{get:function(e,t){return e[t]?e[t]:(e[t]=t,t)}}),ee=new Proxy({},{get:function(e,t){return e[t]?e[t]:(e[t]=t,t)}});e("default",(k=X("UIManager"),_=G({type:l,tooltip:"位置: app://manager/ui/prefab/UIMgrLoading"}),H=G({type:l,tooltip:"位置: app://manager/ui/prefab/UIMgrShade"}),F=G({type:l,tooltip:"位置: app://manager/ui/prefab/UIMgrToast"}),k(((q=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"loadingPre",z,r(t)),i(t,"shadePre",W,r(t)),i(t,"toastPre",j,r(t)),t.Root2D=null,t.UserInterface=null,t.loading=null,t.shade=null,t.toast=null,t.defaultUI=null,t.defaultData="",t.currScene="",t.currPage=null,t.currFocus=null,t.prefabCache={},t.sceneCache={},t.touchEnabled=!0,t.touchMaskMap=new Map,t.showLoadingMap=new Map,t.uiLoadingMap=new Map,t.uiShowingMap=new Map,t.showQueue=[],t}n(t,e);var s=t.prototype;return s.init=function(n){var i,r=this,a=t.setting;if(this.defaultUI=a.defaultUI,this.defaultData=a.defaultData,e.prototype.init.call(this,n),null!=(i=a.preload)&&i.length){var o=T.inst.lib.task.createAny();a.preload.forEach((function(e){e instanceof Array?o.add(e.map((function(e){return function(t){return r.preload(e,t)}}))):o.add((function(t){return r.preload(e,t)}))})),o.start()}},s.onLoad=function(){if(this.Root2D=c("Root2D"),this.UserInterface=c("Root2D/UserInterface"),this.Root2D.getComponentsInChildren(d).forEach((function(e){e.priority<0&&(e.priority=0),e.far<=e.near&&(e.far=e.near+1)})),f.addPersistRootNode(this.Root2D),this.initUITypes(),this.shade=g(this.shadePre),this.loading=g(this.loadingPre),this.shade.active=!1,this.loading.active=!1,this.shade.parent=this.UserInterface,this.loading.parent=this.UserInterface,this.toastPre&&(this.toast=g(this.toastPre),this.toast.parent=this.UserInterface),t.setting.autoFit){var e=p.querySettings(v.Category.SCREEN,"designResolution"),n=I(w.windowSize),i=e.policy,r=function(){if(n.width/n.height>e.width/e.height){if(i===L.FIXED_HEIGHT)return;b.setResolutionPolicy(L.FIXED_HEIGHT),i=L.FIXED_HEIGHT}else{if(i===L.FIXED_WIDTH)return;b.setResolutionPolicy(L.FIXED_WIDTH),i=L.FIXED_WIDTH}};r(),this.schedule((function(){n.equals(w.windowSize)||(n.set(w.windowSize),r())}),.5)}},s.initUITypes=function(){var e=this;J.forEach((function(t){var n=new h(t);n.layer=m.Enum.UI_2D,n.addComponent(A),n.parent=e.UserInterface,n.addComponent(U);var i=n.addComponent(y);i.isAlignBottom=!0,i.isAlignLeft=!0,i.isAlignRight=!0,i.isAlignTop=!0,i.top=0,i.left=0,i.right=0,i.bottom=0,i.alignMode=y.AlignMode.ON_WINDOW_RESIZE}))},s.addTouchMaskListener=function(){if(this.touchEnabled&&!(this.touchMaskMap.size>0))for(var e=0;e<K.length;e++)this.UserInterface.on(K[e],this.stopPropagation,this,!0)},s.removeTouchMaskListener=function(){if(this.touchEnabled&&!(this.touchMaskMap.size>0))for(var e=0;e<K.length;e++)this.UserInterface.off(K[e],this.stopPropagation,this,!0)},s.stopPropagation=function(e){(!this.touchEnabled||this.touchMaskMap.size>0)&&(e.propagationStopped=!0,e.type!==h.EventType.MOUSE_MOVE&&this.log("屏蔽触摸"))},s.getBaseView=function(e){return e?e.components.find((function(e){return e instanceof D})):null},s.getViewInParents=function(e){for(var t=e,n=null;t.parent&&!(t.parent instanceof S)&&!(n=this.getBaseView(t.parent));)t=t.parent;return n},s.getViewInChildren=function(e){for(var t=0;t<e.children.length;t++){var n=e.children[t],i=this.getBaseView(n);if(i)return i}return null},s.getUIClass=function(e){return M.getClassByName(e)},s.getUIPath=function(e){return e},s.getUIPrefix=function(e){for(var t=0;t<J.length;t++){var n=J[t];if(0===e.indexOf(n))return n}this.error("getUIPrefix",""+e)},s.getUIParent=function(e){if(this.currScene===e)return f.getScene();for(var t=this.getUIPrefix(e),n=0;n<J.length;n++){var i=J[n];if(i===t)return this.UserInterface.getChildByName(i)}return this.error("getUIParent","找不到"+e+"对应的Parent"),null},s.getUIInScene=function(e,t){void 0===t&&(t=!1);var n=this.getUIParent(e);if(t){var i=n.children.filter((function(t){return t.name===e}));if(i.length)return i.filter((function(e){return E(e,!0)}))}else{var r=n.children.find((function(t){return t.name===e}));if(r)return E(r,!0)?r:null}return t?[]:null},s.getUIInShowing=function(e,t){if(void 0===t&&(t=!1),t){var n=[];return this.uiShowingMap.forEach((function(t,i){t===e&&n.push(i.node)})),n}var i=null;return this.uiShowingMap.forEach((function(t,n){i||t!==e||(i=n.node)})),i},s.getNativeBundleName=function(e){var t="app-view_"+e,n=p.querySettings(v.Category.ASSETS,"projectBundles");return n&&n.indexOf(t)>=0?t:R.stringCaseNegate(e)},s.getResBundleName=function(e){var t="app-view_"+e+"_Res",n=p.querySettings(v.Category.ASSETS,"projectBundles");return n&&n.indexOf(t)>=0?t:R.stringCaseNegate(e)+"-res"},s.initBundle=function(e,t){var n=this;T.inst.lib.task.createASync().add((function(t){T.inst.manager.loader.loadBundle({bundle:n.getNativeBundleName(e),onComplete:t})})).add((function(t){T.inst.manager.loader.loadBundle({bundle:n.getResBundleName(e),onComplete:t})})).start(t)},s.installUI=function(e,t,n){var i=this;if(this.sceneCache[e])t&&setTimeout((function(){E(i)&&t(i.sceneCache[e])}));else if(this.prefabCache[e])t&&setTimeout((function(){E(i)&&t(i.prefabCache[e])}));else var r=T.inst.lib.task.createSync().add((function(t){i.initBundle(e,t)})).add((function(t){var a=r.results[0];if(!a||!a[0]||!a[1])return t(null);var o=a[0].getSceneInfo(e);T.inst.manager.loader.load({bundle:i.getNativeBundleName(e),path:i.getUIPath(e),type:o?C:l,onProgress:n,onComplete:t})})).start((function(n){if(E(i)){var r=i.sceneCache[e]||i.prefabCache[e];if(r)return t&&t(r);var a=n[1];return a?(a.addRef(),a instanceof l?i.prefabCache[e]=a:i.sceneCache[e]=a,i.log("加载: "+e),t&&t(a)):t&&t(null)}}))},s.uninstallUI=function(e){this.sceneCache[e]?(this.sceneCache[e].decRef(),delete this.sceneCache[e]):this.prefabCache[e]&&(this.prefabCache[e].decRef(),delete this.prefabCache[e]);var t=this.getResBundleName(e),n=this.getNativeBundleName(e);T.inst.manager.loader.releaseAll(t),T.inst.manager.loader.releaseAll(n),T.inst.manager.loader.removeBundle(t),T.inst.manager.loader.removeBundle(n),this.log("卸载: "+e)},s.loadRes=function(e,t,n,i){if("string"==typeof e)T.inst.manager.loader.load({bundle:this.getResBundleName(e),path:t,type:n,onComplete:i});else{var r=this.getBaseView(e.node)||this.getViewInParents(e.node)||this.getViewInChildren(f.getScene());r?T.inst.manager.loader.load({bundle:this.getResBundleName(r.viewName),path:t,type:n,onComplete:i}):(this.error("loadRes",e.name,t),i&&i(null))}},s.preloadRes=function(e,t,n){if("string"==typeof e)T.inst.manager.loader.preload({bundle:this.getResBundleName(e),path:t,type:n});else{var i=this.getBaseView(e.node)||this.getViewInParents(e.node)||this.getViewInChildren(f.getScene());i?T.inst.manager.loader.preload({bundle:this.getResBundleName(i.viewName),path:t,type:n}):this.error("preloadRes",e.name,t)}},s.loadResDir=function(e,t,n,i){if("string"==typeof e)T.inst.manager.loader.loadDir({bundle:this.getResBundleName(e),path:t,type:n,onComplete:i});else{var r=this.getBaseView(e.node)||this.getViewInParents(e.node)||this.getViewInChildren(f.getScene());r?T.inst.manager.loader.loadDir({bundle:this.getResBundleName(r.viewName),path:t,type:n,onComplete:i}):(this.error("loadResDir",e.name,t),i&&i([]))}},s.preloadResDir=function(e,t,n){if("string"==typeof e)T.inst.manager.loader.preloadDir({bundle:this.getResBundleName(e),path:t,type:n});else{var i=this.getBaseView(e.node)||this.getViewInParents(e.node)||this.getViewInChildren(f.getScene());i?T.inst.manager.loader.preloadDir({bundle:this.getResBundleName(i.viewName),path:t,type:n}):this.error("preloadResDir",e.name,t)}},s.preload=function(e,t){var n=this;if(!e)return this.error("preload","fail"),void(t&&setTimeout((function(){E(this)&&t(null)})));this.initBundle(e,(function(i){var r=i[0].getSceneInfo(e);T.inst.manager.loader.preload({bundle:n.getNativeBundleName(e),path:n.getUIPath(e),type:r?C:l,onComplete:t})}))},s.load=function(e){var t=(arguments.length<=2?void 0:arguments[2])&&(arguments.length<=1?void 0:arguments[1]),n=(arguments.length<=2?void 0:arguments[2])||(arguments.length<=1?void 0:arguments[1]);if(!e)return this.error("load","fail"),void(n&&setTimeout((function(){E(this)&&n(null)})));this.installUI(e,(function(e){return e?n&&n(e):n&&n(null)}),t)},s.release=function(e){var t="";if(t="string"==typeof e?e:e.viewName){if("string"==typeof e){this.getUIInScene(t,!0).forEach((function(e){e&&E(e,!0)&&(e.parent=null,e.destroy())}))}else{var n=e.node;n&&E(n,!0)&&(n.parent=null,n.destroy())}var i=this.getUIInScene(t,!0);(0===i.length||i.every((function(e){return!E(e,!0)})))&&(this.uninstallUI(t),this.log("释放资源: "+t))}else this.error("release",e+" fail")},s.checkUIValid=function(e,t,n){var i=this;this.installUI(e,(function(r){if(!r)return n(-1);var a=i.getUIClass(e);return a?a.isViewValid?void a.isViewValid((function(e){n(e?1:0)}),t):n(1):n(0)}))},s.refreshShade=function(){for(var e=!1,n=this.UserInterface.children,i=n.length-1;i>=0;i--){var r=n[i];if(r!==this.shade&&r!==this.loading)for(var a=r.children,o=a.length-1;o>=0;o--){var s=a[o];if(s!==this.shade){var u=this.getBaseView(s);if(u&&(!e&&u.isCaptureFocus&&u.isShow&&(e=!0,this.currFocus!==u&&(E(this.currFocus,!0)&&this.currFocus.constructor.prototype.focus.call(this.currFocus,!1),this.currFocus=u,this.currFocus.constructor.prototype.focus.call(this.currFocus,!0))),u.isNeedShade&&u.isShow)){var h=Object.assign({},t.setting.shade,u.constructor.prototype.onShade.call(u));this.shade.getComponent(V).init("number"!=typeof h.delay?0:h.delay,"number"!=typeof h.begin?60:h.begin,"number"!=typeof h.end?180:h.end,"number"!=typeof h.speed?100:h.speed),this.shade.layer=s.layer,this.shade.parent=r,this.shade.active=!0,this.shade.setPosition(this.shade.position.x,this.shade.position.y,s.position.z);var l=this.shade.getSiblingIndex(),c=s.getSiblingIndex();return void(l>c?this.shade.setSiblingIndex(c):this.shade.setSiblingIndex(c-1))}}}}this.shade.active=!1,this.shade.getComponent(V).clear(),e||(E(this.currFocus,!0)&&this.currFocus.constructor.prototype.focus.call(this.currFocus,!1),this.currFocus=null)},s.parsingPrefab=function(e,t){var n;if(!e)return null;var i=g(e);return i.active=!1,i.name!==t&&(this.warn("parsingPrefab","节点名与UI名不一致, 已重置为UI名: "+this.getUIPath(t)),i.name=t),i.parent=this.getUIParent(t),null==(n=i.getComponent(y))||n.updateAlignment(),i},s.parsingScene=function(e,t){if(!e||!e.scene)return null;e.scene.name!==t&&(this.warn("parsingScene","场景名与UI名不一致, 已重置为UI名: "+this.getUIPath(t)),e.scene.name=t);var n=this.getViewInChildren(e.scene);return n?(n.node.active=!1,n.node.name!==t&&(this.warn("parsingScene","节点名与UI名不一致, 已重置为UI名: "+this.getUIPath(t)),n.node.name=t),n.node):(this.error("parsingScene","解析场景时未查询到根节点存在BaseView: "+this.getUIPath(t)),null)},s.addUILoadingUuid=function(e){var t=this.createUUID();return this.uiLoadingMap.has(e)?this.uiLoadingMap.get(e).push(t):this.uiLoadingMap.set(e,[t]),t},s.removeUILoadingUuid=function(e,t){if(!this.uiLoadingMap.has(e))return!1;var n=this.uiLoadingMap.get(e).indexOf(t);return-1!==n&&(this.uiLoadingMap.get(e).splice(n,1),!0)},s.createUI=function(e,t,n){var i=this,r=t?"":this.addTouchMask();if(e){var a=this.addUILoadingUuid(e),o=this.getUIInScene(e);if(E(o,!0)&&!0===this.getBaseView(o).isSingleton)setTimeout((function(){E(i)&&(i.removeTouchMask(r),!1!==i.removeUILoadingUuid(e,a)&&(E(o,!0)?n(o):i.createUI(e,t,n)))}));else{var s=t?"":this.showLoading();this.load(e,(function(t){if(E(i)){if(i.removeTouchMask(r),!1===i.removeUILoadingUuid(e,a))return i.hideLoading(s);if(t instanceof C)return n(i.parsingScene(t,e),t.scene),void i.hideLoading(s);var o=i.getUIInScene(e);E(o,!0)&&!1!==i.getBaseView(o).isSingleton?(n(o),i.hideLoading(s)):(n(i.parsingPrefab(t,e)),i.hideLoading(s))}}))}}else setTimeout((function(){E(i)&&(i.removeTouchMask(r),n(null))}))},s.showDefault=function(e){this.defaultUI?this.show({name:this.defaultUI,data:this.defaultData,onShow:e}):(T.inst.manager.ui.showToast("请先设置首界面\n在setting.ts中修改defaultUI",100),e&&e(),this.warn("defaultUI不存在，请在setting.ts中修改"))},s.isShow=function(e){return!!this.getUIInShowing(e)||this.isInQueue(e)||this.isLoading(e)},s.isInQueue=function(e){return!!this.showQueue.find((function(t){return t.name==e}))},s.isLoading=function(e){return this.uiLoadingMap.has(e)&&this.uiLoadingMap.get(e).length>0},s.putInShowQueue=function(e){"join"===e.queue||0===this.showQueue.length?this.showQueue.push(e):this.showQueue.splice(1,0,e),1===this.showQueue.length&&this.consumeShowQueue()},s.consumeShowQueue=function(){var e=this;if(0!==this.showQueue.length){var t=this.showQueue[0];this.show({name:t.name,data:t.data,onShow:t.onShow,onHide:function(n){t.onHide&&t.onHide(n),e.showQueue.shift(),e.consumeShowQueue()},onError:t.onError?function(n,i){var r=t.onError(n,i);return e.showQueue.shift(),e.consumeShowQueue(),r}:void 0,top:t.top,attr:t.attr,silent:t.silent})}},s.showUI=function(e){var n=this,i=e.name,r=e.data,a=e.onShow,o=e.onHide,s=e.onError,u=e.top,h=void 0===u||u,l=e.attr,c=void 0===l?null:l,d=e.silent,g=void 0!==d&&d;this.createUI(i,g,(function(u,l){if(!u){if(n.error("show",i+" 不存在或加载失败"),s&&!0!==s(i+" 不存在或加载失败",t.ErrorCode.LoadError))return;return n.scheduleOnce((function(){return n.showUI(e)}),1),void(g||n.showLoading(1))}!l&&h&&u.setSiblingIndex(-1);var d=n.getBaseView(u);n.uiShowingMap.set(d,i),d.constructor.prototype.show.call(d,r,c,(function(e){n.uiShowingMap.set(d,i),a&&a(e)}),(function(e){n.uiShowingMap.delete(d),o&&o(e)}),(function(e){if(e)n.uiShowingMap.delete(d),s&&s(e,t.ErrorCode.LogicError);else if(D.isPage(i))if(n.uiShowingMap.set(d,i),E(n.currPage,!0)&&n.currPage!==d&&n.currPage.isShow&&n.currPage.constructor.prototype.hide.call(n.currPage,{name:i}),n.currPage=d,l)n.currScene!==i&&(n.currScene=i,f.runSceneImmediate(l,null,(function(){n.log("切换场景: "+i)})));else if(n.currScene!==Z){n.currScene=Z;var r=new S(Z);r.autoReleaseAssets=!0,f.runSceneImmediate(r,null,(function(){n.log("切换场景: UIRoot")}))}}))}))},s.show=function(e){var n=this,i=e.name,r=e.data,a=e.queue,o=e.onError,s=e.silent,u=void 0!==s&&s;if(a)this.putInShowQueue(e);else{this.log("show: "+i);var h=u?"":this.showLoading();T.inst.lib.task.execute((function(a){n.checkUIValid(i,r,(function(r){return-1===r?(n.error("show",i+" 不存在或加载失败"),o&&!0!==o(i+" 不存在或加载失败",t.ErrorCode.LoadError)?n.hideLoading(h):a(1)):0===r?(n.warn("show",i+" 无效"),n.uninstallUI(i),o&&o(i+" 无效",t.ErrorCode.InvalidError),void n.hideLoading(h)):(n.showUI(e),void n.hideLoading(h))}))}))}},s.showAsync=function(e){var t=this;return new Promise((function(n){t.show(a({},e,{onHide:function(e){n(e)}}))}))},s.hide=function(e){var t=e.name,n=e.data,i=e.onHide,r=this.getUIInShowing(t,!0);if(this.log("hide: "+t),0===r.length&&(!this.uiLoadingMap.has(t)||0===this.uiLoadingMap.get(t).length))return this.warn("hide",t+" 不存在");this.uiLoadingMap.has(t)&&(this.uiLoadingMap.get(t).length=0);for(var a=r.length-1;a>=0;a--){var o=r[a],s=this.getBaseView(o);this.currPage===s&&(this.currPage=null),s.constructor.prototype.hide.call(s,n,i)}},s.pop=function(e){var t=e.name,n=e.data,i=e.onHide,r=this.getUIInShowing(t,!0);if(this.uiLoadingMap.has(t)&&this.uiLoadingMap.get(t).length)return this.uiLoadingMap.get(t).pop(),void this.log("pop: "+t);if(r.length){var a=r.pop(),o=this.getBaseView(a);return this.currPage===o&&(this.currPage=null),o.constructor.prototype.hide.call(o,n,i),void this.log("pop: "+t)}this.warn("pop",t+" 不存在")},s.shift=function(e){var t=e.name,n=e.data,i=e.onHide,r=this.getUIInShowing(t,!0);if(r.length){var a=r[0],o=this.getBaseView(a);return this.currPage===o&&(this.currPage=null),o.constructor.prototype.hide.call(o,n,i),void this.log("shift: "+t)}if(this.uiLoadingMap.has(t)&&this.uiLoadingMap.get(t).length)return this.uiLoadingMap.get(t).shift(),void this.log("shift: "+t);this.warn("shift",t+" 不存在")},s.hideAll=function(e){var t=this,n=void 0===e?{}:e,i=n.data,r=n.exclude;this.log("hideAll"),this.uiShowingMap.forEach((function(e,n){D.isPaper(e)||r&&-1!==r.indexOf(e)||n!==t.currPage&&n.constructor.prototype.hide.call(n,i)})),this.uiLoadingMap.forEach((function(e,t){D.isPaper(t)||r&&-1!==r.indexOf(t)||(e.length=0)}))},s.showLoading=function(e){var t=this;void 0===e&&(e=0),this.loading.active=!0,this.loading.getComponentInChildren(N).init();var n=this.createUUID();return this.showLoadingMap.set(n,!0),e>0&&this.scheduleOnce((function(){t.hideLoading(n)}),e),n},s.hideLoading=function(e){e&&(this.showLoadingMap.delete(e),0===this.showLoadingMap.size&&(this.loading.getComponentInChildren(N).clear(),this.loading.active=!1))},s.addTouchMask=function(e){var t=this;void 0===e&&(e=0),this.addTouchMaskListener();var n=this.createUUID();return this.touchMaskMap.set(n,!0),e>0&&this.scheduleOnce((function(){t.removeTouchMask(n)}),e),n},s.removeTouchMask=function(e){e&&(this.touchMaskMap.delete(e),this.removeTouchMaskListener())},s.showToast=function(e,t){if(!this.toast)return this.error("showToast","请确认首场景中「Root2D/Manager/UIManager」的「Toast Pre」属性存在");this.toast.getComponent(O).add({message:e,timeout:t})},s.clearToast=function(){this.toast&&this.toast.getComponent(O).clear()},s.setTouchEnabled=function(e){e?(this.touchEnabled=!0,this.removeTouchMaskListener()):(this.addTouchMaskListener(),this.touchEnabled=!1),this.warn("setTouchEnabled",this.touchEnabled)},s.onUserInterface=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.on.apply(this.UserInterface,t)},s.onceUserInterface=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.once.apply(this.UserInterface,t)},s.offUserInterface=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.off.apply(this.UserInterface,t)},s.targetOffUserInterface=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.targetOff.apply(this.UserInterface,t)},s.onUIRoot2D=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.on.apply(this.UserInterface,t)},s.onceUIRoot2D=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.once.apply(this.UserInterface,t)},s.offUIRoot2D=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.off.apply(this.UserInterface,t)},s.targetOffUIRoot2D=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.targetOff.apply(this.UserInterface,t)},s.sortUserInterface=function(e){var t;null==(t=this.UserInterface)||null==(t=t.getChildByName(e))||null==(t=t.getComponent(A))||t.updateZOrder()},o(t,[{key:"camera",get:function(){return this.Root2D.getComponent(P).cameraComponent}},{key:"canvas",get:function(){return this.Root2D.getComponent(P)}}]),t}(R)).setting={},q.ErrorCode=Y,q.ViewName=$,q.MiniViewName=ee,z=t((Q=q).prototype,"loadingPre",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(Q.prototype,"shadePre",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(Q.prototype,"toastPre",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=Q))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgrLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,r,n,s,a,o,h,g;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,o=e.Graphics,h=e.UITransform,g=e.Component}],execute:function(){var c,l,d,p,u,f,v;s._RF.push({},"4a8e5aXrnhKSo0IF6zGgjon","UIMgrLoading",void 0);var m=a.ccclass,w=a.property,S=a.requireComponent;e("default",(c=m("UIMgrLoading"),l=S(o),d=S(h),p=w({tooltip:"等待几秒后开始动画"}),c(u=l(u=d((v=i((f=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return i=e.call.apply(e,[this].concat(s))||this,r(i,"delay",v,n(i)),i.progress=0,i.ringScale=1,i.reverse=!1,i.angleSpeed=120,i.ringSpeed=.02,i.inited=!1,i.drawing=!1,i.timedown=0,i}t(i,e);var s=i.prototype;return s.init=function(){this.inited||(this.inited=!0,this.progress=0,this.ringScale=1,this.node.angle=0,this.reverse=!1,this.drawing=!1,this.timedown=this.delay,this.getComponent(o).clear())},s.clear=function(){this.inited=!1,this.drawing=!1},s.onDraw=function(){var e=this.node.getComponent(h),i=this.getComponent(o),t=e.width*(.5-e.anchorX),r=e.height*(.5-e.anchorY),n=Math.min(e.width/2,e.height/2),s=Math.PI;if(i.clear(),this.reverse){var a=.5*Math.PI+0,g=.5*Math.PI+2*this.progress*s+0;i.arc(t,r,n,a,g,!0)}else{var c=.5*Math.PI-0,l=.5*Math.PI-2*this.progress*s-0;i.arc(t,r,n,c,l,!1)}i.stroke()},s.update=function(e){if(this.inited){if(!this.drawing){if(this.timedown>0&&(this.timedown-=e),!(this.timedown<=0))return;this.drawing=!0}this.node.angle-=this.angleSpeed*e,(this.node.angle>=360||this.node.angle<=-360)&&(this.node.angle=this.node.angle%360),this.ringScale>0?(this.progress=Math.min(1,this.progress+this.ringSpeed*this.ringScale),1==this.progress&&(this.ringScale=-1,this.reverse=!this.reverse)):(this.progress=Math.max(0,this.progress+this.ringSpeed*this.ringScale),0==this.progress&&(this.ringScale=1,this.reverse=!this.reverse)),this.onDraw()}},i}(g)).prototype,"delay",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=f))||u)||u)||u));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgrShade.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,s,p,d,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,p=e._decorator,d=e.UIOpacity,a=e.Component}],execute:function(){var c,h,y,u,l,g;s._RF.push({},"d02952bsB1JPJ4xXteObDOr","UIMgrShade",void 0);var b=p.ccclass,f=p.property,_=p.requireComponent;e("default",b("UIMgrShade")(c=_(d)((y=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"_delay",y,r(t)),n(t,"_begin",u,r(t)),n(t,"_end",l,r(t)),n(t,"_speed",g,r(t)),t.inited=!1,t.drawing=!1,t.timedown=0,t}i(t,e);var s=t.prototype;return s.init=function(e,t,i,n){this.delay=e,this.begin=t,this.end=i,this.speed=n,this.drawing=!0,this.inited||(this.inited=!0,this.timedown=this.delay,this.node.getComponent(d).opacity=this.timedown>0?0:this.begin)},s.clear=function(){this.inited=!1,this.drawing=!1},s.update=function(e){if(this.inited&&this.drawing){if(this.timedown>0){if(this.timedown-=e,this.timedown>0)return;this.node.getComponent(d).opacity=this.begin}var t=this.node.getComponent(d);this.speed>0?(t.opacity+=this.speed*e,t.opacity>this.end&&(t.opacity=this.end)):this.speed<0&&(t.opacity+=this.speed*e,t.opacity<this.end&&(t.opacity=this.end)),t.opacity==this.end&&(this.drawing=!1)}},o(t,[{key:"delay",get:function(){return this._delay},set:function(e){this._delay=Math.max(e,0)}},{key:"begin",get:function(){return this._begin},set:function(e){e>=0&&e<=255&&(this._begin=e)}},{key:"end",get:function(){return this._end},set:function(e){e>=0&&e<=255&&(this._end=e)}},{key:"speed",get:function(){return this.begin==this.end?0:this.begin>this.end?this._speed>0?-this._speed:this._speed:this._speed>=0?this._speed:-this._speed},set:function(e){this._speed=e}}]),t}(a)).prototype,"_delay",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(h.prototype,"delay",[f],Object.getOwnPropertyDescriptor(h.prototype,"delay"),h.prototype),u=t(h.prototype,"_begin",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(h.prototype,"begin",[f],Object.getOwnPropertyDescriptor(h.prototype,"begin"),h.prototype),l=t(h.prototype,"_end",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),t(h.prototype,"end",[f],Object.getOwnPropertyDescriptor(h.prototype,"end"),h.prototype),g=t(h.prototype,"_speed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),t(h.prototype,"speed",[f],Object.getOwnPropertyDescriptor(h.prototype,"speed"),h.prototype),c=h))||c)||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgrToast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIMgrToastCell.ts"],(function(e){var t,o,i,n,s,r,l,a,p,c,h,u,g,f,d,y,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.createClass},function(e){r=e.cclegacy,l=e._decorator,a=e.UITransform,p=e.Prefab,c=e.NodePool,h=e.instantiate,u=e.UIOpacity,g=e.tween,f=e.Tween,d=e.view,y=e.Component},function(e){m=e.default}],execute:function(){var v,T,C,z,M,P;r._RF.push({},"cde15KM9mxA9L3SJ78TjOHf","UIMgrToast",void 0);var x=l.property,I=l.ccclass,S=l.requireComponent;e("default",(v=I("UIMgrToast"),T=S(a),C=x(p),v(z=T((P=t((M=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,i(t,"cell",P,n(t)),t.lifeTime=2,t.outTime=.2,t.squeezeSpeed=200,t.pool=new c,t}o(t,e);var r=t.prototype;return r.add=function(e){var t=this,o=this.pool.get()||h(this.cell);o.setPosition(0,0,0),o.parent=this.node,o.active=!0,o.getComponent(m).init(e.message),o.getComponent(u).opacity=255,g(o.getComponent(u)).delay(e.timeout||this.lifeTime).to(this.outTime,{opacity:0}).call((function(){t.pool.put(o)})).start()},r.clear=function(){for(var e=this.node.children,t=e.length-1;t>=0;t--)f.stopAllByTarget(e[t].getComponent(u)),e[t].destroy()},r.onDestroy=function(){this.clear(),this.pool.clear()},r.update=function(e){for(var t=this.node.children,o=t.length-1,i=!1;o>=0;o--){var n=o===t.length-1,s=t[o];if(i)f.stopAllByTarget(s.getComponent(u)),this.pool.put(s);else if(n){var r=0-s.getComponent(a).height/2,l=s.position.y+r;if(l>r){var p=Math.max(-this.squeezeSpeed*e*(t.length-o),r-l);s.setPosition(s.position.x,s.position.y+p,s.position.z)}}else{var c=t[o+1],h=s.getComponent(a),g=c.getComponent(a),y=s.position.y-h.height/2-6,m=c.position.y+g.height/2;if(y<m){var v=Math.min(this.squeezeSpeed*e*(t.length-o-1),m-y);s.setPosition(s.position.x,s.position.y+v,s.position.z),y>d.getVisibleSize().height/2&&(i=!0,f.stopAllByTarget(s.getComponent(u)),this.pool.put(s))}else if(y>m){var T=Math.max(-this.squeezeSpeed*e*(t.length-o),m-y);s.setPosition(s.position.x,s.position.y+T,s.position.z)}}}},s(t,[{key:"size",get:function(){return this.node.children.length}}]),t}(y)).prototype,"cell",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=M))||z)||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgrToastCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,o,l,s,a,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,s=t.UIOpacity,a=t.UITransform,c=t.Label,u=t.Component}],execute:function(){var p,f,h,g,v,d,y;o._RF.push({},"6cc63HWsI5O44ve4wfEKIc0","UIMgrToastCell",void 0);var I=l.ccclass,w=l.property,m=l.requireComponent;t("default",(p=I("UIMgrToastCell"),f=m(s),h=m(a),g=w(c),p(v=f(v=h((y=e((d=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"title",y,n(e)),e}i(e,t);var o=e.prototype;return o.init=function(t){t.split("\n").find((function(t){return t.length>30}))?(this.title.overflow=c.Overflow.RESIZE_HEIGHT,this.title.getComponent(a).width=600):this.title.overflow=c.Overflow.NONE,this.title.string=t,this.title.updateRenderData(!0)},o.unuse=function(){this.title.string=""},e}(u)).prototype,"title",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=d))||v)||v)||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgrZOrder.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,d,h;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,i=e.Node,o=e.director,d=e.Director,h=e.Component}],execute:function(){var s;r._RF.push({},"ad5cbUQY55AwqzdOZrQBim5","UIMgrZOrder",void 0);var c=n.ccclass;e("default",c("UIMgrZOrder")(s=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).zOrder=!1,t.tempArr=[],t}t(r,e);var n=r.prototype;return n.onLoad=function(){this.checkUpdateZOrder(),this.node.on(i.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.on(i.EventType.CHILD_REMOVED,this.onChildRemoveed,this),i.EventType.CHILDREN_ORDER_CHANGED?this.node.on(i.EventType.CHILDREN_ORDER_CHANGED,this.checkUpdateZOrder,this):this.node.on(i.EventType.SIBLING_ORDER_CHANGED,this.checkUpdateZOrder,this)},n.onDestroy=function(){o.off(d.EVENT_AFTER_UPDATE,this.updateZOrder,this),this.node.off(i.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.off(i.EventType.CHILD_REMOVED,this.onChildRemoveed,this),i.EventType.CHILDREN_ORDER_CHANGED?this.node.off(i.EventType.CHILDREN_ORDER_CHANGED,this.checkUpdateZOrder,this):this.node.off(i.EventType.SIBLING_ORDER_CHANGED,this.checkUpdateZOrder,this)},n.onChildAdded=function(e){this.checkUpdateZOrder(),e.on(i.EventType.TRANSFORM_CHANGED,this.checkUpdateZOrder,this)},n.onChildRemoveed=function(e){e.off(i.EventType.TRANSFORM_CHANGED,this.checkUpdateZOrder,this)},n.checkUpdateZOrder=function(){this.zOrder||(this.zOrder=!0,o.once(d.EVENT_AFTER_UPDATE,this.updateZOrder,this))},n.updateZOrder=function(){this.zOrder&&(Array.prototype.push.apply(this.tempArr,this.node.children),this.tempArr.sort((function(e,t){return e.position.z-t.position.z||e.getSiblingIndex()-t.getSiblingIndex()})).forEach((function(e,t){e.setSiblingIndex(t)})),this.zOrder=!1,this.tempArr.length=0)},r}(h))||s);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});